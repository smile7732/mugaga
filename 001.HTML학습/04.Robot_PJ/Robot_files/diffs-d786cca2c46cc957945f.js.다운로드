"use strict";(()=>{var jn=Object.defineProperty;var i=(G,$)=>jn(G,"name",{value:$,configurable:!0});(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["diffs"],{21230:(G,$,d)=>{var u=d(11427),T=d(10555);(0,u.on)("click",".js-conversation-menu-button",function(){let t=!0;return async function(e){if(t===!1){const o=e.currentTarget.closest(".select-menu").querySelector("details-menu");if(!o)return;o.innerHTML="";const r=`${o.getAttribute("src")}?instrument=1`,c=await fetch(r);c.ok&&(o.innerHTML=await c.text())}t=!1}}()),(0,u.on)("click",".js-conversations-menu-item",function(t){const e=t.currentTarget,n=e.closest(".js-conversations-details");n.hasAttribute("open")&&n.removeAttribute("open"),window.location.hash=e.hash,(0,T.kc)(document)}),(0,u.on)("click",".js-resolved-conversations",async function(t){const e=t.currentTarget.querySelector(".dropdown-caret"),n=t.currentTarget.querySelector(".select-menu-header");E(e),n.classList.toggle("border-bottom-0")});function E(t){t.style.transform===""?t.style.transform="rotate(180deg)":t.style.transform=""}i(E,"flipCaret");var P=d(27157),j=d(47789),l=d(30762),v=d(97424);(0,u.on)("details:toggled-group",".js-file.js-details-container",function(t){t.target===t.currentTarget&&a(t.detail.open)}),(0,u.on)("details:toggled",".js-file.js-details-container",function(t){if(t.target!==t.currentTarget)return;const e=t.currentTarget;e.getBoundingClientRect().top<0&&(0,T.zT)(e)}),(0,j.Z)(()=>{const t=window.location.hash.slice(1);if(!t)return;const e=document.getElementsByName(t)[0];if(!e)return;const n=e.nextElementSibling;n&&n.matches(".js-file.js-details-container")&&(n.classList.add("open"),n.classList.add("Details--on"))}),(0,l.N7)(".js-file-header-dropdown",{subscribe:t=>(0,P.RB)(t,"toggle",S)});function S({currentTarget:t}){const e=t,n=e.hasAttribute("open");e.closest(".js-file-header").classList.toggle("has-open-dropdown",n)}i(S,"toggleFileHeaderMenu");function a(t){if(!document.querySelector(".js-file-filter"))return;const n=h();for(const r of n)r.checked=t;const s=L();s&&(s.checked=!t);const o=_();W(o),O(o),se(),J(),oe(),(0,v.X)(o,R(),p(),k(),b(),q(),B(),w())}i(a,"toggledAllFileContents");function p(){return Array.from(h()).filter(e=>e.checked).map(e=>e.value)}i(p,"getSelectedFileTypes");function h(){return document.querySelectorAll(".js-diff-file-type-option")}i(h,"getFileTypeOptions");function L(){const t=document.querySelector(".js-deleted-files-toggle");if(t instanceof HTMLInputElement)return t}i(L,"getDeletedFilesInput");function _(){return D()||B()||w()||k()||q()}i(_,"fileFilterActive");function k(){return b().length>0}i(k,"codeownerFilterActive");function b(){const t=document.querySelectorAll(".js-diff-owner-option");return Array.from(t).filter(n=>n.checked).map(n=>n.value)}i(b,"getSelectedOwners");function D(){return p().length!==h().length}i(D,"fileTypeFilterActive");function q(){const t=document.querySelector(".js-manifests-option");return t?t.checked:!1}i(q,"manifestFilterActive");function B(){const t=L();return t?!t.checked:!1}i(B,"deletedFilterActive");function w(){const t=document.querySelector(".js-viewed-files-toggle");return t?!t.checked:!1}i(w,"viewedFilterActive");function R(){return new URLSearchParams(window.location.search).has("w")}i(R,"whitespaceFilterActive");function W(t){document.querySelector(".js-file-filter-text").classList.toggle("color-fg-accent",t)}i(W,"toggleHighlightActiveFilter");function O(t){const e=document.querySelector(".js-reset-filters"),n=document.querySelector(".js-commits-filtered");e!=null&&!n&&(e.hidden=!t)}i(O,"toggleResetFileFiltersButton");function J(){const t=D(),e=document.querySelector(".js-file-filter-select-all-container"),n=t?"data-select-all-markup":"data-all-selected-markup",s=e.getAttribute(n);e.textContent=s,e.classList.toggle("color-fg-muted",!t),e.classList.toggle("color-fg-accent",t)}i(J,"toggleSelectAll");function se(){const t=h(),e=B();for(const n of t)if(e){const s=n.getAttribute("data-non-deleted-files-count")==="0";n.disabled=s}else n.disabled=!1}i(se,"toggleAvailableOptions");function oe(){const t=document.querySelectorAll(".js-file-type-count");for(const e of t){const n=B()?"data-non-deleted-file-count-markup":"data-all-file-count-markup",s=e.getAttribute(n);s&&(e.textContent=s)}}i(oe,"toggleFileTypeCounts");function ae(){const t=document.querySelector(".js-file-filter-blankslate");if(!t)return;if(document.querySelectorAll(".js-diff-progressive-loader").length>0){t.hidden=!0;return}const n=document.querySelectorAll(".js-file");if(n.length===0){t.hidden=!0;return}const s=Array.from(n).some(o=>!o.hidden);t.hidden=s}i(ae,"checkEmptyFilterResults"),(0,u.on)("click",".js-jump-to-menu-item",function({currentTarget:t}){const e=t.getAttribute("href").substring(1),n=document.querySelector(`[data-anchor="${e}"]`);if(n){const s=n.closest(".js-file.js-details-container");s.hidden=!1}ae()});var y=d(13717),I=d(23343),U=d(89390),te=d(65889),m=d(16393),g=d(75914),x=d(66789);const H="```suggestion",Q="```",z=new RegExp(`${H}(?:.*)
`,"i"),Y=new RegExp(`${Q}(
|$)`);function K(t,e){const n=t.slice(0,e).split(`
`);return t.split(`
`)[n.length-1]}i(K,"lineAtIndex");function X(t){const n=/^(\s+)/.exec(t);return n&&n[0]||""}i(X,"leadingWhitespace");function re(t){let e=`${H}
`;return e+=`${t}
`,e+=Q,e}i(re,"formatSuggestion");function ue(t,e,n=0){const s=e.substring(n,e.length),o=t.exec(s);return o?o.index+n:-1}i(ue,"findNextOccurrenceOf");function je(t,e){const n=[];let s=0,o=-1;for(;(o=ue(z,t,s))>-1;){s=o+H.length;const r=ue(Y,t,s);if(r===-1)return!1;s=r+Q.length,n.push([o,r])}return n.some(r=>e>r[0]&&e<r[1])}i(je,"cursorInSuggestionBlock");function St(t){const e=t.selectionStart;if(!je(t.value,e))return!1;const n=t.value,s=K(n,e);if(s===null)return!1;const r=`
${X(s)}`,c=n.substr(0,e)+r+n.substr(e);(0,te.Se)(t,c);const f=e+r.length;return t.setSelectionRange(f,f),!0}i(St,"insertNewSuggestionLine");function jt(t,e){const n=re(t),s=e.selectionStart,o=e.value,r=ue(/\n/,o,s),c=o.trim()==="",f=K(o,s),M=f.trim()==="",C=`
${Q}`.length;let A=o,N=0;if(c)A=n,N=A.length-C;else if(r===-1)M?(A=o+n,N=A.length-C):(A=[o,n].join(`
`),N=A.length-C);else if(M){const V=X(f),ee=s-V.length,Z=o.substring(0,ee),F=o.substring(r,o.length);A=[Z,n,F].join(""),N=A.length-F.length-C}else if(je(o,s)){const V=ue(/```/,o,s)+3,ee=o.substring(0,V),Z=o.substring(V,o.length);A=[ee,`
`,n,Z].join(""),N=A.length-Z.length-C}else{const V=o.substring(0,r),ee=o.substring(r,o.length);A=[V,`
`,n,ee].join(""),N=A.length-ee.length-C}(0,te.Se)(e,A),e.focus(),e.setSelectionRange(N,N)}i(jt,"insertSuggestionBlock");var Oe=d(66123);const ce={addToBatchEnabled:".js-add-to-batch-enabled",unchangedSuggestion:".js-unchanged-suggestion",closedOrMergedPull:".js-closed-pull",viewingSubset:".js-viewing-subset-changes",leftBlob:".js-validation-on-left-blob",rightBlob:".js-validation-on-right-blob",outdatedComment:".js-outdated-comment",resolvedThread:".js-resolved-thread",pendingReview:".js-pending-review",isMultiLine:".js-is-multiline"};function wt(t){const e=t.getAttribute("data-lines");if(e!=null){const s=t.closest(".js-suggested-changes-container").querySelector(".js-comment-field");jt(e,s)}}i(wt,"renderSuggestionBlock");function Re(t,e){const n=document.querySelectorAll(".js-apply-suggestion-button"),s=t.querySelector(".js-disabled-apply-suggestion-button");for(const o of n){const r=s.cloneNode(!0);pe(r,e),o.closest("details").replaceWith(r)}}i(Re,"disableAllApplySuggestionButtons");function De(t){const e=document.querySelector(".js-batched-suggested-changes-container");e&&e.classList.add("d-none");for(const n of document.querySelectorAll(".js-apply-single-suggestion"))n.classList.remove("d-none"),n.disabled=!0,n.setAttribute("aria-label",t);for(const n of document.querySelectorAll(".js-batched-suggested-changes-add"))n.classList.remove("d-none"),n.disabled=!0,n.setAttribute("aria-label",t);for(const n of document.querySelectorAll(".js-batched-suggested-changes-remove"))n.classList.add("d-none");for(const n of document.querySelectorAll(".js-focus-commit-suggestions-form-button"))n.classList.add("d-none");for(const n of document.querySelectorAll(".js-pending-batched-suggestion-label"))n.classList.add("d-none")}i(De,"disableBatchSuggestionsButtons");function pe(t,e){t.setAttribute("aria-label",e),t.classList.remove("d-none")}i(pe,"displayButton");function Te(t,e){const n=document.querySelector(".js-suggested-changes-inline-validation-template").cloneNode(!0);n.classList.remove("js-suggested-changes-inline-validation-template");const s=n.querySelector(".js-suggested-changes-inline-error-message");s.textContent=t.trim(),e.parentNode.insertBefore(n,e.nextSibling)}i(Te,"validateOnPreview"),(0,u.on)("click",".js-suggested-change-toolbar-item",function(t){const e=t.currentTarget;e instanceof HTMLButtonElement&&e.getAttribute("aria-disabled")==="false"&&wt(e)}),(0,u.on)("click",".js-refresh-after-suggestion",function(){window.location.reload()});function Be(t){if(!document.querySelector(".js-suggested-changes-subset-files"))return;const n=t.querySelectorAll(".js-suggested-change-toolbar-item"),s=ce.viewingSubset;if(!s)return;const o=document.querySelector(s).textContent.trim();for(const r of n){r.setAttribute("aria-disabled","true");const c=r.getAttribute("aria-describedby"),f=document.getElementById(c);f.textContent=o}}i(Be,"validateInlineCommmentsContainer"),(0,l.N7)(".js-inline-comments-container",{add(t){Be(t)}}),(0,l.N7)(".js-preview-body .js-apply-changes",{add(t){const e=t.closest(".js-suggested-changes-container");if(!e)return t.remove();const n=document.querySelector(ce.rightBlob).textContent,s=document.querySelector(ce.leftBlob).textContent,o=t.closest(".js-suggested-changes-blob");if(e.getAttribute("data-thread-side")!==""){if(e.getAttribute("data-thread-side")==="left")return Te(s,o),t.remove()}else{const A=t.closest(".js-inline-comment-form"),N=A.querySelector('input[name="side"]');if(!A||!N)return t.remove();if(A&&N.value==="left")return Te(s,o),t.remove()}const r=t.previousElementSibling,c=r.querySelector(".js-blob-code-deletion"),f=r.querySelectorAll(".js-blob-code-addition");if(!c||f.length===0)return;const M=c.textContent,C=Array.from(f).map(A=>A.textContent);if(M===C.join(`
`))return Te(n,o),t.remove();t.remove()}}),(0,l.N7)(".js-comment-body .js-apply-changes",{add(t){const e=t.closest(".js-suggested-changes-container");if(!e)return t.remove();const n=e.querySelector(".js-suggested-changes-template");if(!(n instanceof HTMLTemplateElement))return t.remove();const s=n.content.cloneNode(!0),o=s.querySelector(".js-disabled-apply-suggestion-button");let r;try{r=s.querySelector(".js-batched-suggested-changes-add")}catch(F){if(F.name!=="QueryError")throw F}if(document.querySelectorAll(".js-suggested-changes-files-tab").length){const F=document.querySelector(ce.addToBatchEnabled).textContent;r&&(r.removeAttribute("disabled"),r.setAttribute("aria-label",F))}const c=document.querySelector(".js-pull-header-details"),f=c&&c.getAttribute("data-pull-is-open")==="true",M=t.closest(".js-resolvable-timeline-thread-container"),C=n.getAttribute("data-comment-pending")==="true",A=e.classList.contains("js-selection-contains-deletions");if(M&&M.getAttribute("data-resolved")==="true"){const F=document.querySelector(ce.resolvedThread).textContent,ne=s.querySelector("details");return ne&&ne.remove(),pe(o,F),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",F)),t.replaceWith(s)}if(!f){const F=document.querySelector(ce.closedOrMergedPull).textContent;return pe(o,F),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",F)),t.replaceWith(s)}if(C){const F=document.querySelector(ce.pendingReview).textContent;return s.querySelector("details").remove(),pe(o,F),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",F)),t.replaceWith(s)}if(A){const F=document.querySelector(ce.leftBlob).textContent;return s.querySelector("details").remove(),pe(o,F),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",F)),t.replaceWith(s)}const N=document.querySelector(".js-suggested-changes-subset-files"),V=n.getAttribute("data-outdated-comment")==="true";if(N||V){let F;return N?F=document.querySelector(ce.viewingSubset).textContent:V&&(F=document.querySelector(ce.outdatedComment).textContent),s.querySelector("details").remove(),pe(o,F),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",F)),t.replaceWith(s)}const ee=s.querySelector(".js-single-suggested-change-form"),Z=t.closest(".js-suggested-changes-blob");if(Z){const F=Z.querySelector(".js-blob-code-deletion"),ne=Z.querySelectorAll(".js-blob-code-addition");if(!F)return;const le=F.textContent,me=Array.from(ne).map(de=>de.textContent);if(me.length>0&&le===me.join(`
`)){const de=document.querySelector(ce.unchangedSuggestion).textContent;s.querySelector("details").remove(),pe(o,de),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",de))}else for(const de of me){const Se=document.createElement("input");Se.setAttribute("type","hidden"),Se.setAttribute("name","value[]"),Se.value=de,ee.appendChild(Se)}}t.replaceWith(s)}}),(0,l.N7)(".js-pull-header-details",{add(t){const e=t.getAttribute("data-pull-is-open")==="true",n=document.querySelector(".js-suggested-changes-template");if(e||!(n instanceof HTMLTemplateElement))return;const s=n.content,o=document.querySelector(ce.closedOrMergedPull).textContent;Re(s,o),De(o)}}),(0,l.N7)(".js-suggested-changes-subset-files",{add(){const t=document.querySelector(".js-suggested-changes-template");if(!(t instanceof HTMLTemplateElement))return;const e=t.content,n=document.querySelector(ce.viewingSubset).textContent;Re(e,n),De(n)}}),(0,u.on)("click",".js-apply-suggestion-button",async function(t){const e=t.currentTarget.parentElement;if(e){const n=e.querySelector(".js-suggestion-commit-title");setTimeout(()=>n.focus(),1)}}),(0,u.on)("click",".js-dismiss-suggested-change-onboarding-notice",async function(t){const e=t.currentTarget.getAttribute("data-url"),n=t.currentTarget.parentElement.querySelector(".js-data-url-csrf"),s=new FormData;if(s.append("notice","suggested_changes_onboarding_prompt"),(await fetch(e,{method:"POST",mode:"same-origin",body:s,headers:{"Scoped-CSRF-Token":n.value,"X-Requested-With":"XMLHttpRequest"}})).ok){const r=document.querySelectorAll(".js-suggested-change-onboarding-notice");for(const c of r)c.remove()}}),(0,Oe.w4)("keypress",".js-comment-field",function(t){if(t.key==="Enter"){const e=t.target;St(e)&&t.preventDefault()}}),(0,Oe.w4)("keypress",".js-suggestion-commit-message",function(t){const e=t.currentTarget;t.key==="Enter"&&e.setAttribute("rows","3")});function Lt(t){const n=t.closest(".js-review-state-classes").querySelectorAll("[data-pending-batched-suggestion]").length;for(const o of document.querySelectorAll(".js-pending-batched-suggested-changes-count"))o.textContent=String(n);const s=document.querySelector(".js-reenable-add-to-batch").textContent;for(const o of document.querySelectorAll("[data-batched-suggestion-reenable-sibling]"))o.removeAttribute("data-batched-suggestion-reenable-sibling"),o.removeAttribute("disabled"),o.setAttribute("aria-label",s);if(n>0){t.hidden=!1;const o=t.querySelector(".js-batched-suggested-changes-toggle");o.classList.add("anim-pulse-in"),o.addEventListener("animationend",()=>o.classList.remove("anim-pulse-in"),{once:!0});for(const r of document.querySelectorAll(".js-apply-single-suggestion"))r.classList.add("d-none");for(const r of document.querySelectorAll(".js-batched-suggested-changes-add")){const c=r.closest(".js-suggested-change-form-container");c.getAttribute("data-pending-batched-suggestion")==="true"||c.getAttribute("data-comment-pending")==="true"||c.getAttribute("data-outdated-comment")==="true"?r.classList.add("d-none"):r.classList.remove("d-none"),r.getAttribute("data-batched-suggestion-disabled-by-sibling")==="true"&&(r.removeAttribute("data-batched-suggestion-disabled-by-sibling"),r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",document.querySelector(".js-one-suggestion-per-line").textContent))}for(const r of document.querySelectorAll(".js-batched-suggested-changes-remove"))r.closest(".js-suggested-change-form-container").getAttribute("data-pending-batched-suggestion")==="true"?r.classList.remove("d-none"):r.classList.add("d-none");for(const r of document.querySelectorAll(".js-focus-commit-suggestions-form-button")){const c=r.closest(".js-suggested-change-form-container"),f=c.getAttribute("data-comment-pending")==="true",M=c.getAttribute("data-outdated-comment")==="true",C=c.getAttribute("data-resolved-comment")==="true",V=r.closest(".js-inline-comments-container").querySelector('input[name="side"]').value==="left";f||M||C||V?r.classList.add("d-none"):r.classList.remove("d-none")}for(const r of document.querySelectorAll(".js-pending-batched-suggestion-label"))r.closest(".js-suggested-change-form-container").getAttribute("data-pending-batched-suggestion")==="true"?r.classList.remove("d-none"):r.classList.add("d-none")}else{t.hidden=!0;for(const o of document.querySelectorAll(".js-apply-single-suggestion"))o.classList.remove("d-none");for(const o of document.querySelectorAll(".js-batched-suggested-changes-add"))o.classList.remove("d-none");for(const o of document.querySelectorAll(".js-batched-suggested-changes-remove"))o.classList.add("d-none");for(const o of document.querySelectorAll(".js-focus-commit-suggestions-form-button"))o.classList.add("d-none");for(const o of document.querySelectorAll(".js-pending-batched-suggestion-label"))o.classList.add("d-none")}}i(Lt,"updatePendingSuggestionsState");function Fe(){const t=document.querySelector(".js-batched-suggested-changes-container");t&&setTimeout(()=>Lt(t))}i(Fe,"updatePendingSuggestionsHandler"),(0,u.on)("click",".js-batched-suggested-changes-add",function(t){const e=t.target,n=e.closest(".js-suggested-change-form-container");if(n.getAttribute("data-comment-pending")==="true"||n.getAttribute("data-outdated-comment")==="true"||e.getAttribute("data-batched-suggestion-disabled-by-sibling")==="true")return;n.setAttribute("data-pending-batched-suggestion","true");const s=e.closest(".js-inline-comments-container");for(const o of s.querySelectorAll(".js-batched-suggested-changes-add"))o.setAttribute("data-batched-suggestion-disabled-by-sibling","true");e.removeAttribute("data-batched-suggestion-disabled-by-sibling"),Fe()}),(0,u.on)("click",".js-batched-suggested-changes-remove",function(t){t.currentTarget.closest(".js-suggested-change-form-container").removeAttribute("data-pending-batched-suggestion");const n=t.currentTarget.closest(".js-inline-comments-container");for(const s of n.querySelectorAll(".js-batched-suggested-changes-add"))s.setAttribute("data-batched-suggestion-reenable-sibling","true");Fe()}),(0,u.on)("click",".js-focus-commit-suggestions-form-button",function(t){t.preventDefault(),window.location.href="#clear-commit-suggestions",window.location.href="#commit-suggestions"}),(0,u.on)("click",".js-dismiss-batched-suggested-changes-onboarding-notice",async function(t){const e=t.currentTarget.getAttribute("data-url"),n=t.currentTarget.parentElement.querySelector(".js-data-url-csrf"),s=new FormData;if(s.append("notice","batched_suggested_changes_onboarding_prompt"),(await fetch(e,{method:"POST",mode:"same-origin",body:s,headers:{"Scoped-CSRF-Token":n.value,"X-Requested-With":"XMLHttpRequest"}})).ok)for(const r of document.querySelectorAll(".js-batched-suggested-change-onboarding-notice"))r.remove()});function Pe(t,e){const n=t.querySelector("input[name=commit_title]"),s=t.querySelector("textarea[name=commit_message]");let o=n.value.trim();o===""&&(o=n.defaultValue);const r=s.value.trim();r!==""&&(o=`${o}

${r}
`),n.disabled=!0,s.disabled=!0;const c=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name","message"),c.value=o,t.appendChild(c);const f=document.createElement("input");f.setAttribute("type","hidden"),f.setAttribute("name","changes"),f.value=JSON.stringify(e),t.appendChild(f)}i(Pe,"convertFormInputs"),(0,u.on)("click",".js-single-suggested-change-form .js-suggested-changes-submit",function(t){const n=t.currentTarget.closest(".js-single-suggested-change-form"),s=Array.from(n.querySelectorAll('input[name="value[]"]')).map(r=>r.value),o=[{commentId:n.querySelector("input[name=comment_id]").value,path:n.querySelector("input[name=path]").value,suggestion:s}];Pe(n,o)}),(0,x.AC)(".js-single-suggested-change-form",async function(t,e){const n=t.closest(".js-suggested-change-form-container"),s=t.closest("details"),o=n.querySelector(".js-suggestion-applied"),c=t.closest(".js-suggested-changes-contents").querySelector(".js-error-message-placeholder");try{await e.json(),o.classList.remove("d-none"),n.querySelector(".js-batched-suggested-changes-add").classList.add("d-none"),s.remove(),window.location.reload()}catch(f){if(f.name!=="QueryError"){const M=f.response.json&&f.response.json.error,C=c.querySelector(".js-error-message");c.hidden=!1,C.textContent=M,n.prepend(c),t.closest(".js-suggested-change-form-container").querySelector(".js-batched-suggested-changes-add").classList.add("d-none"),s.remove()}}}),(0,u.on)("click",".js-suggestion-batch-submit",function(t){const e=t.currentTarget.closest(".js-batched-suggested-changes-form"),n=[];for(const s of document.querySelectorAll("[data-pending-batched-suggestion]")){const o=s.querySelector(".js-single-suggested-change-form"),r=Array.from(o.querySelectorAll('input[name="value[]"]')).map(c=>c.value);n.push({commentId:o.querySelector("input[name=comment_id]").value,path:o.querySelector("input[name=path]").value,suggestion:r})}Pe(e,n)}),(0,x.AC)(".js-batched-suggested-changes-form",async function(t,e){try{await e.json();const n=t.closest(".js-batched-suggested-changes-container");n.hidden=!0,window.location.reload()}catch(n){const s=n.response.json&&n.response.json.error,r=t.closest(".js-batched-suggested-changes-container").querySelector(".js-error-message-container"),c=r.querySelector(".js-error-message");c.textContent=s,r.hidden=!1}}),(0,l.N7)(".js-files-tab-stale",{add(){const t=document.querySelector(".js-batched-suggested-changes-container");t&&setTimeout(()=>{t.hidden=!0})}});let At=0;(0,u.on)("click",".js-add-single-line-comment",function(t){const e=t.currentTarget,n=e.closest(".file");$e(n);const s=Et(e)||xt(e),o=Ne(s.querySelector("td"),e),r=o.querySelector(".js-inline-comment-form");r instanceof HTMLFormElement&&Ke(r,e),(0,y.j)(o)});function Et(t){const e=t.closest("tr"),n=He(e,".js-inline-comments-container");if(n instanceof Element)return n}i(Et,"existingCommentRow");function He(t,e){const n=t.nextElementSibling;return n&&n.matches(e)?n:null}i(He,"next");function xt(t){const e=t.closest("tr"),n=Ce("js-inline-comments-single-container-template",t).firstElementChild;return e.after(n),n}i(xt,"insertCommentRow");function Ne(t,e){const n=Array.from(t.querySelectorAll(".review-comment-form-container")).pop();if(n)return n.closest("div.js-line-comments");{const s=Ce("js-inline-comments-single-container-template",e).querySelector("div.js-line-comments");return t.appendChild(s),s}}i(Ne,"findOrInsertCommentThread"),(0,u.on)("click",".js-add-split-line-comment",function(t){const e=t.currentTarget,n=e.closest(".file");$e(n);const s=e.closest("tr"),o=e.getAttribute("data-type")==="addition"?"js-addition":"js-deletion",r=It(s),c=kt(r,o,e),f=Ne(c,e),M=f.querySelector(".js-inline-comment-form");M instanceof HTMLFormElement&&Ke(M,e),(0,y.j)(f)}),(0,x.AC)(".js-inline-comment-form",async function(t,e){Tt(t);let n;try{n=await e.json()}catch(f){if(f.response){let M;try{M=f.response.json}catch{}if(M){Ct(t,M);return}}throw f}const s=n.json,o=s.inline_comment,r=t.closest(".js-line-comments");o&&r.querySelector(".js-comments-holder").append((0,g.r)(document,o));const c=s.inline_comment_thread;c&&r.replaceWith((0,g.r)(document,c)),(0,y.w)(t)});function Tt(t){const e=t.querySelector(".js-comment-form-error");e&&(e.hidden=!0,e.textContent=null)}i(Tt,"resetInlineCommentError");function Ct(t,e){const n=t.querySelector(".js-comment-form-error");let s;e.errors?Array.isArray(e.errors)?s=e.errors.join(", "):s=e.errors:s="There was an error posting your comment.",n.textContent=s,n.style.display="block",n.hidden=!1,n.classList.remove("d-none")}i(Ct,"handleInlineCommentError");function qt(t){const[e,n]=t.match(/^new_inline_comment_(?:discussion|diff)_(?:[\w-]+)_(\d+)_(\d+)$/)||[];if(!e)return;const s=document.querySelector(`.js-inline-comment-form input[name='in_reply_to'][value='${n}']`);if(!s)return;const o=s.closest(".js-line-comments");o&&(0,y.j)(o)}i(qt,"showReplyForm");function Mt(t){const[e,n]=t.match(/^new_inline_comment_diff_(?:[\w-]+)_(\d+)$/)||[];if(!e)return;const s=document.querySelector(`.js-add-line-comment[data-anchor='${e}'][data-position='${n}']`);s&&s.click()}i(Mt,"showCommentForm"),document.addEventListener("session:resume",function(t){const e=t.detail;qt(e.targetId),Mt(e.targetId)});function $e(t){const e=t.querySelector(".js-toggle-file-notes");e instanceof HTMLInputElement&&(0,te.Se)(e,!0)}i($e,"ensureInlineNotesEnabled");function We(){for(const t of document.querySelectorAll(".file .js-inline-comments-container")){const n=t.querySelectorAll(".js-comments-holder > *").length>0,s=t.querySelector("[data-resolved='true']")!=null,o=t.querySelector(".js-inline-comment-form-container"),r=!!o&&o.classList.contains("open");!(n||s)&&!r&&t.remove()}}i(We,"cleanupInlineCommentContainers"),(0,l.N7)(".js-comment",{remove:We}),(0,u.on)("inlinecomment:focus",".js-inline-comment-form-container",function(t){const e=t.target.querySelector(".js-suggested-changes-container");e&&Ue(e)}),(0,l.N7)(".js-suggested-changes-container.is-comment-editing",t=>{Ue(t)});function _t(t,e){const n=new URLSearchParams(t.search.slice(1)),s=e.elements.namedItem("in_reply_to")||e.elements.namedItem("comment_id"),o=e.querySelector("textarea");if(n.append("textarea_id",o.id),s instanceof HTMLInputElement&&s.value)return n.append("comment_id",s.value),n;const r=e.elements.namedItem("path"),c=e.elements.namedItem("start_side"),f=e.elements.namedItem("start_line"),M=e.elements.namedItem("side"),C=e.elements.namedItem("line"),A=e.elements.namedItem("start_commit_oid"),N=e.elements.namedItem("end_commit_oid"),V=e.elements.namedItem("base_commit_oid");return!(r instanceof HTMLInputElement)||!(c instanceof HTMLInputElement)||!(f instanceof HTMLInputElement)||!(M instanceof HTMLInputElement)||!(C instanceof HTMLInputElement)||!(A instanceof HTMLInputElement)||!(N instanceof HTMLInputElement)||!(V instanceof HTMLInputElement)?null:(n.append("path",r.value),n.append("start_side",c.value),n.append("start_line",f.value),n.append("end_side",M.value),n.append("end_line",C.value),n.append("start_commit_oid",A.value),n.append("end_commit_oid",N.value),n.append("base_commit_oid",V.value),n)}i(_t,"paramsForSuggestionButton");async function Ue(t){const e=t.querySelector(".js-suggestion-button-placeholder");if(!e)return;const n=e.getAttribute("data-src-base");if(!n)return;const s=new URL(n,window.location.origin),o=e.closest(".js-inline-comment-form")||e.closest(".js-comment-update");if(!(o instanceof HTMLFormElement))return;const r=_t(s,o);if(!r)return;s.search=r.toString();const c=await(0,m.a)(document,s.toString());e.innerHTML="",e.appendChild(c)}i(Ue,"loadSuggestionButton"),document.addEventListener("inlinecomment:collapse",()=>{We()});function kt(t,e,n){const s=t.querySelector(`.js-line-comments.${e}`);if(s)return s;const o=Ce("js-inline-comments-split-form-container-template",n).firstElementChild;o.classList.add(e);const r=t.querySelectorAll(`.${e}`);r[r.length-1].after(o);for(const f of r)f.remove();return o}i(kt,"expandLineCommentsEmptyCells");function It(t){let e=He(t,".js-inline-comments-container");if(e)return e;{const n="js-inline-comments-split-container-template",s=document.getElementById(n);if(!s)throw new Error(`Could not find element with id ${n}`);if(!(s instanceof HTMLTemplateElement))throw new Error(`Found element with id ${n} - but was not a Template`);return e=new U.R(s,{}).firstElementChild,t.after(e),e}}i(It,"inlineCommentsSplitContainerForLine");function Ve(t,e,n,s){if(t.classList.remove("color-bg-success","color-bg-danger"),s){t.textContent=e;return}if(n==="right"){t.classList.add("color-fg-success"),t.textContent=`+${e}`;return}if(n==="left"){t.classList.add("color-fg-danger"),t.textContent=`-${e}`;return}t.textContent=String(e)}i(Ve,"applyMultiLinePreview");const ze={R:"right",L:"left"};function Ot(t,e){const n=(0,I.vu)();if(!n||n.end.is(n.start))return;if(!(0,I.Oz)(e,n)){(0,I.MO)();return}const{start:{lineNumber:s},end:{lineNumber:o}}=n;let{start:{side:r},end:{side:c}}=n;const f=Number(e.getAttribute("data-line")),M=e.getAttribute("data-side");if(f!==o||!n.end.isContext()&&M!==ze[c]){(0,I.MO)();return}const C=ze[r],A=t.elements.namedItem("start_line"),N=t.elements.namedItem("start_side"),V=t.elements.namedItem("line"),ee=t.elements.namedItem("side"),Z=t.elements.namedItem("preview_start_side"),F=t.elements.namedItem("preview_side");if(A instanceof HTMLInputElement&&N instanceof HTMLInputElement&&V instanceof HTMLInputElement&&ee instanceof HTMLInputElement&&Z instanceof HTMLInputElement&&F instanceof HTMLInputElement){A.value=String(s),N.value=C,N.value=Z.value=N.value,F.value=ee.value;const ne=A.value;r=N.value;const le=V.value;c=ee.value;const me=t.closest(".js-inline-comment-form-container");if(ne&&le){const de=me.querySelector(".js-multi-line-preview"),Se=de.querySelector(".js-multi-line-preview-start"),yn=de.querySelector(".js-multi-line-preview-end"),vn=n.start.isContext(),Sn=n.end.isContext();Ve(Se,ne,r,vn),Ve(yn,le,c,Sn),de.hidden=!1,me.classList.add("is-multiline")}else me.querySelector(".js-multi-line-preview").hidden=!0,me.classList.remove("is-multiline");Be(me)}}i(Ot,"fillMultilineFormFields");function Ke(t,e){var n;const s=["type","path","position","line","side","original-line"];for(const r of s){const c=t.elements.namedItem(r);if(c instanceof HTMLInputElement){const f=e.getAttribute(`data-${r}`)||"";c.value=f}}const o=(n=t.getElementsByClassName("js-expanded-diff-placeholder-value"))==null?void 0:n[0];if(o instanceof HTMLInputElement){const r=e.getAttribute("data-expanded-diff")||"";o.value=r}Ot(t,e)}i(Ke,"fillTemplateFormFields");function Ce(t,e){const n=document.getElementById(t);if(!n)throw new Error(`Could not find element with id ${t}`);if(!(n instanceof HTMLTemplateElement))throw new Error(`Found element with id ${t} - but was not a Template`);return new U.R(n,{anchor:e.getAttribute("data-anchor")||"",position:e.getAttribute("data-position")||"",sequence:At++})}i(Ce,"renderCommentTemplate");var we=d(99481),be=d(67647);(0,l.N7)(".js-diff-progressive-container",function(t){Qe(t);const e=t.querySelector(".js-diff-progressive-loader");!e||e.addEventListener("load",function(){Qe(t)})});function Qe(t){const e=Ze();if(!e)return;Ge(t,e);const n=Rt(t,e);!n||((0,T.zT)(n),Xe(n))}i(Qe,"processProgressiveContainer"),(0,l.N7)(".js-diff-load-container",function(t){const e=t.querySelector(".js-diff-entry-loader");!e||e.addEventListener("load",function(){t.closest(".js-file").classList.remove("hide-file-notes-toggle");const s=Ze();!s||Ge(t,s)})}),(0,u.on)("click",".js-diff-load",function(t){if(t.target.classList.contains("js-ignore-this"))return;const e=t.currentTarget.closest(".js-diff-load-container");Xe(e)});function Ze(){return window.location.hash.slice(1)}i(Ze,"urlAnchor");function Ge(t,e){let n;e.match(/^diff-.+[LR]\d+-[LR]\d+/)?n=(0,be.Q)(t.ownerDocument,e.substring(0,e.indexOf("-",5))):n=(0,be.Q)(t.ownerDocument,e),n&&t.contains(n)&&((0,we.O4)(n),(0,T.zT)(n))}i(Ge,"scrollToAnchor");function Rt(t,e){const n=Dt(t,e);return n||Bt(t,e)}i(Rt,"getEntryFromAnchor");function Dt(t,e){const n=/^(diff-[0-9a-f]{32})(?:[L|R]\d+)?$/.exec(e);if(!n)return;const s=n[1],o=t.querySelector(`a[name='${s}']`);if(!o)return;const r=o.nextElementSibling;if(!(r&&!r.querySelector(".js-diff-load-container")))return r}i(Dt,"getEntryFromDiffAnchor");function Bt(t,e){const n=/^(?:r|commitcomment-)(\d+)$/.exec(e);if(!n)return;const s=n[1],o=t.querySelector(`#diff-with-comment-${s}`);return o?o.closest(".js-file"):void 0}i(Bt,"getEntryFromCommentAnchor");function Xe(t){const e=t.querySelector(".js-diff-entry-loader"),n=t.querySelector(".js-diff-placeholder"),s=t.querySelector("button.js-diff-load"),o=t.querySelector(".js-button-text");n.setAttribute("fill","url('#animated-diff-gradient')"),o.textContent=s.getAttribute("data-disable-with")||"",s.disabled=!0;const r=new URL(e.getAttribute("data-fragment-url")||"",window.location.origin);return e.src=r.toString(),e.data}i(Xe,"loadDiff");var Ft=d(68842);(0,u.on)("click",".js-rendered, .js-source",function(t){const e=t.currentTarget;if(e.classList.contains("selected")){t.preventDefault();return}Pt(e),Ht(e)}),(0,x.AC)(".js-prose-diff-toggle-form",async function(t,e){const n=t.closest(".js-details-container"),s=n.querySelector(".js-file-content"),o=await e.html();for(;s.lastChild;)s.removeChild(s.lastChild);s.append(o.html),n.classList.toggle("display-rich-diff"),n.classList.toggle("show-inline-notes")});function Pt(t){const e=t.closest(".js-file-header"),n=t.classList.contains("js-rendered"),s=t.classList.contains("js-source"),o=e.getAttribute("data-short-path"),r=e.getAttribute("data-anchor"),c=new URL(window.location.href,window.location.origin),f=new URLSearchParams(c.search.slice(1));c.hash=r,n?f.set("short_path",o):s&&f.delete("short_path"),c.search=f.toString(),(0,Ft.lO)(null,"",c.toString())}i(Pt,"updateWindowLocation");function Ht(t){for(const e of document.querySelectorAll(".js-rendered, .js-source"))e.classList.remove("selected"),e.removeAttribute("aria-current");t.classList.add("selected"),t.setAttribute("aria-current","true")}i(Ht,"updateSelectedButton"),(0,u.on)("click",".js-toc-retry",function(t){if(!(t.target instanceof Element))return;const n=t.target.closest(".select-menu").querySelector("include-fragment"),s=n.getAttribute("src");n.setAttribute("src",""),n.setAttribute("src",s)});var Nt=d(97807);function Ye(t,e,n){const s=Array.from(t.querySelectorAll('[role="menuitem"]'));let o=s.indexOf(e),r=s.indexOf(n);if(o===-1)throw new Error("Couldn't find startIndex in container");if(r===-1)throw new Error("Couldn't find endItem in container");Je(t),s[r].classList.add("is-last-in-range"),o>r&&([o,r]=[r,o]);for(const c of s.slice(o,r+1))c.classList.add("is-range-selected")}i(Ye,"highlightSelectedRange");async function $t(t,e){function n(s){Ye(t,e,s.target.closest('[role="menuitem"]'))}i(n,"highlightRange"),Ye(t,e,e),t.addEventListener("mouseover",n),await new Promise(s=>window.addEventListener("keyup",s,{once:!0})),t.removeEventListener("mouseover",n),Je(t)}i($t,"observeShiftRangeHighlights");function Je(t){for(const e of t.querySelectorAll('[role="menuitem"]'))e.classList.remove("is-range-selected","is-last-in-range")}i(Je,"resetHighlight"),(0,l.N7)(".js-diffbar-range-menu .js-diffbar-range-list",{subscribe:Wt});function Wt(t){const e=t.closest("details-menu"),n=t.classList.contains("js-diffbar-invert-range");let s=!1;function o(c){s=c.shiftKey,s&&c.preventDefault()}i(o,"clicked");function r(c){if(!s)return;c.preventDefault();const f=c.detail.relatedTarget;if(f.classList.contains("is-range-selected")){c.stopPropagation();const M=t.querySelectorAll(".is-range-selected"),C=n?M.length-1:0,A=n?0:M.length-1,N=M[C],V=M[A],ee=t.getAttribute("data-range-url"),Z=N.getAttribute("data-parent-commit"),F=V.getAttribute("data-commit"),ne=Z&&F?`${Z}..${F}`:F,le=ee.replace("$range",ne);(0,Nt.ZP)({url:le,container:document.querySelector("#js-repo-pjax-container")})}else c.stopImmediatePropagation(),$t(t,f)}return i(r,"selected"),t.addEventListener("click",o,{capture:!0}),e.addEventListener("details-menu-select",r),{unsubscribe:()=>{t.removeEventListener("click",o,{capture:!0}),e.removeEventListener("details-menu-select",r)}}}i(Wt,"manageRangeHighlight"),(0,u.on)("toggle",".js-diffbar-range-menu",function(t){const e=t.currentTarget;if(!e.hasAttribute("open"))return;const n=e.querySelector(".in-range");n&&n.focus()},{capture:!0});var et=d(44088);(0,u.on)("click",".js-compare-tab",function(t){for(const s of document.querySelectorAll(".js-compare-tab.selected"))s.classList.remove("selected");t.currentTarget.classList.add("selected");for(const s of document.querySelectorAll("#commits_bucket, #files_bucket, #commit_comments_bucket"))s.classList.add("d-none");const n=t.currentTarget.hash;document.querySelector(n).classList.remove("d-none"),t.preventDefault()}),(0,j.Z)(function({target:t}){if(!(t instanceof HTMLElement))return;const e=t.closest("#commits_bucket, #files_bucket, #commit_comments_bucket");e&&e instanceof HTMLElement&&!(0,et.Z)(e)&&document.querySelector(`.js-compare-tab[href="#${e.id}"]`).click()}),(0,u.on)("click",".js-toggle-range-editor-cross-repo",function(){document.querySelector(".js-range-editor").classList.toggle("is-cross-repo")}),(0,u.on)("pjax:click",".js-range-editor",function(t){const e=document.querySelector(".js-compare-pr");if(e&&e.classList.contains("open")){const n=t.detail.options,s=new URL(n.url,window.location.origin);s.search.match(/expand=1/)||(s.search+=`${s.search?"&":""}expand=1`,n.url=s.toString())}}),(0,l.N7)(".js-compare-pr.open",{add(){document.body.classList.add("is-pr-composer-expanded")},remove(){document.body.classList.remove("is-pr-composer-expanded")}}),(0,u.on)("change",".js-collab-checkbox",function({currentTarget:t}){const e=t.form;for(const o of e.querySelectorAll(".errored"))o.classList.remove("errored");const s=t.closest(".js-collab-option").querySelector(".js-status-indicator");s.classList.remove("status-indicator-success","status-indicator-failed"),s.classList.add("status-indicator-loading")}),(0,x.AC)(".js-collab-form",async function(t,e){try{await e.text()}catch{for(const s of t.querySelectorAll(".status-indicator-loading")){s.classList.remove("status-indicator-loading"),s.classList.add("status-indicator-failed");const o=s.closest(".js-collab-option");o.classList.add("errored");const r=o.querySelector(".js-collab-checkbox");r.checked=!r.checked}for(const s of t.querySelectorAll(".status-indicator-success"))s.classList.remove("status-indicator-success");return}for(const n of t.querySelectorAll(".errored"))n.classList.remove("errored");for(const n of t.querySelectorAll(".status-indicator-loading"))n.classList.remove("status-indicator-loading"),n.classList.add("status-indicator-success")});var ie=d(93673),Ut=Object.defineProperty,Vt=Object.getOwnPropertyDescriptor,ve=i((t,e,n,s)=>{for(var o=s>1?void 0:s?Vt(e,n):e,r=t.length-1,c;r>=0;r--)(c=t[r])&&(o=(s?c(e,n,o):c(o))||o);return s&&o&&Ut(e,n,o),o},"__decorateClass"),tt=i((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"__accessCheck"),nt=i((t,e,n)=>(tt(t,e,"read from private field"),n?n.call(t):e.get(t)),"__privateGet"),zt=i((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"__privateAdd"),Kt=i((t,e,n,s)=>(tt(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),"__privateSet"),Le;let ye=i(class extends HTMLElement{constructor(){super(...arguments);zt(this,Le,null),this.handleSidebarScroll=()=>{Kt(this,Le,requestAnimationFrame(this.updateSidebarHeight))},this.updateSidebarHeight=()=>{if(!this.sidebarContainer)return;const t=document.documentElement.clientHeight,e=this.prToolbar.getBoundingClientRect(),n=this.mainContainer.getBoundingClientRect(),s=t>=n.bottom,o=e.top===0;let r,c="8px",f="-8px";s?r=n.bottom-e.height:o?r=t-e.height:(r=t-e.height-e.top,c="0px 8px",f="-0px -8px"),this.sidebarContainer.style.height=`${r}px`,this.sidebarContainer.style.padding=c,this.sidebarContainer.style.margin=f}}connectedCallback(){!this.sidebarContainer||(window.addEventListener("scroll",this.handleSidebarScroll),this.handleSidebarScroll())}disconnectedCallback(){!this.sidebarContainer||(window.removeEventListener("scroll",this.handleSidebarScroll),nt(this,Le)!=null&&cancelAnimationFrame(nt(this,Le)))}toggleSidebar(t){var e;this.layoutContainer.classList.toggle("hx_Layout--sidebar-hidden"),(e=this.fileTree)==null||e.instrumentToggleFileTree(t.detail.toggleButton)}},"DiffLayoutElement");Le=new WeakMap,ve([ie.fA],ye.prototype,"layoutContainer",2),ve([ie.fA],ye.prototype,"prToolbar",2),ve([ie.fA],ye.prototype,"mainContainer",2),ve([ie.fA],ye.prototype,"sidebarContainer",2),ve([ie.fA],ye.prototype,"fileTree",2),ye=ve([ie.Ih],ye),(0,u.on)("click",".js-split-diff-view",function(){const t=document.querySelector(".js-unified-diff-view-box"),e=document.querySelector(".js-split-diff-view-box"),n=document.querySelector(".js-split-diff-view-option"),s=document.querySelector(".js-unified-diff-view-option");e.classList.add("color-border-accent-emphasis"),e.classList.remove("color-border-default"),t.classList.remove("color-border-accent-emphasis"),t.classList.add("color-border-default"),s.checked=!1,n.checked=!0}),(0,u.on)("click",".js-unified-diff-view",function(){const t=document.querySelector(".js-unified-diff-view-box"),e=document.querySelector(".js-split-diff-view-box"),n=document.querySelector(".js-split-diff-view-option"),s=document.querySelector(".js-unified-diff-view-option");e.classList.remove("color-border-accent-emphasis"),e.classList.add("color-border-default"),t.classList.add("color-border-accent-emphasis"),t.classList.remove("color-border-default"),s.checked=!0,n.checked=!1});var Qt=d(61075);(0,u.on)("details:toggled",".js-pull-merging",function({currentTarget:t}){const e=Array.from(t.querySelectorAll(".js-merge-pull-request")),n=e.some(et.Z);for(const s of e)s.classList.toggle("is-dirty",n)}),(0,u.on)("click",".js-merge-box-try-again",async function({currentTarget:t}){const e=t.getAttribute("data-form-target");if(!["js-cleanup-branch-form","js-merge-branch-form","js-queue-branch-form","js-update-branch-form"].includes(e))return;const s=t.closest(".js-pull-merging").getElementsByClassName(e)[0];(0,u.f)(s,"submit")}),document.addEventListener("session:resume",function(t){const e=document.getElementById(t.detail.targetId);if(e){const n=e.closest(".js-merge-pull-request");if(n){const s=n.closest(".js-details-container");s&&s.classList.add("open")}}}),(0,u.on)("change",".js-merge-button-toggle",function({currentTarget:t}){const e=t.closest(".js-merge-pr"),n=!t.checked;for(const s of e.querySelectorAll(".js-merge-commit-button"))s.disabled=n}),(0,u.on)("change",".js-auto-merge-admin-override",function({currentTarget:t}){const e=t.closest(".js-merge-message-container"),n=t.checked,s=e.querySelector(".js-merge-box"),o=e.querySelector(".js-auto-merge-box"),r=e.querySelector(".js-merge-form"),c=e.querySelector(".js-auto-merge-form"),f=e.querySelectorAll(".js-merge-menu-item"),M=e.querySelectorAll(".js-auto-merge-menu-item");if(s.hidden=!n,o.hidden=n,r.hidden=!n,c.hidden=n,n)for(let C=0;C<M.length;C++){const A=M[C].getAttribute("aria-checked");A!==null&&f[C].setAttribute("aria-checked",A)}else for(let C=0;C<f.length;C++){const A=f[C].getAttribute("aria-checked");A!==null&&M[C].setAttribute("aria-checked",A)}}),(0,u.on)("details-menu-selected",".js-update-branch-method-menu",Zt,{capture:!0});function Zt(t){const e=t.detail.relatedTarget,n=e.closest(".js-merge-pr");n.classList.toggle("is-updating-via-merge",e.value==="merge"),n.classList.toggle("is-updating-via-rebase",e.value==="rebase");const s=n.querySelector(".js-update-branch-type");s&&(s.value=e.value)}i(Zt,"updateBranchUpdateMethod"),(0,u.on)("submit",".js-update-branch-form",function({currentTarget:t}){var e;const n=t.closest(".js-merge-pr"),s=n==null?void 0:n.querySelector(".btn-group-update-merge");s&&(s.disabled=!0);const o=n==null?void 0:n.querySelector(".btn-group-update-rebase");o&&(o.disabled=!0);const r=n==null?void 0:n.querySelector(".js-update-method-menu-button");r&&(r.classList.add("disabled","user-select-none"),r.setAttribute("aria-disabled","true"));const c=n==null?void 0:n.querySelector(".js-update-branch-method-menu");c&&((e=c==null?void 0:c.parentNode)==null||e.removeChild(c))}),(0,u.on)("details-menu-selected",".js-merge-method-menu",Gt,{capture:!0});function Gt(t){const e=t.detail.relatedTarget,n=e.closest(".js-merge-pr"),s=n.querySelector(".js-merge-pull-request"),o=n.querySelector(".js-auto-merge-admin-override"),r=n.querySelector(".js-merge-method-menu-button"),c=r.getAttribute("data-merge-button-class");r.classList.toggle("btn-danger",e.hasAttribute("data-dangerous-action")),c&&r.classList.toggle(c,!e.hasAttribute("data-dangerous-action"));const f=n.querySelector(".js-merge-title"),M=n.querySelector(".js-merge-message");f.defaultValue===f.value&&(f.defaultValue=f.value=e.getAttribute("data-input-title-value")),M.defaultValue===M.value&&(M.defaultValue=M.value=e.getAttribute("data-input-message-value")),n.classList.toggle("is-merging",e.value==="merge"),n.classList.toggle("is-squashing",e.value==="squash"),n.classList.toggle("is-rebasing",e.value==="rebase"),n.classList.toggle("is-merging-group",e.value==="group"),n.classList.toggle("is-merging-solo",e.value==="solo"),n.classList.toggle("is-merging-jump",e.value==="jump");const C=s.classList.contains("js-admin-override-merge")&&e.value==="merge"||s.classList.contains("js-admin-override-squash")&&e.value==="squash"||s.classList.contains("js-admin-override-rebase")&&e.value==="rebase",A=n.querySelectorAll(".js-admin-override");for(const le of A)le.hidden=!C||o!==null;const N=n.querySelector(".js-merge-type");N&&(N.value=e.value);const V=C&&!n.querySelector(".js-merge-button-toggle").checked,ee=n.querySelectorAll(".js-merge-pull-request .js-merge-commit-button");for(const le of ee)le.type=e.value===le.value?"submit":"button",le.disabled=V;s.classList.toggle("color-fg-danger",C);const Z=n.closest(".js-pull-merging"),F=new URL(Z.getAttribute("data-url"),window.location.origin),ne=new URLSearchParams(F.search);ne.set("merge_type",e.value),F.search=ne.toString(),Z.setAttribute("data-url",F.toString())}i(Gt,"updateForMergeMethod"),(0,u.on)("details:toggled",".js-merge-pr",function(t){const n=t.currentTarget.querySelector(".js-merge-message");n&&(0,u.f)(n,"change")}),(0,l.N7)(".branch-action-item.js-details-container.open",{add(t){for(const e of t.querySelectorAll(".js-merge-review-section"))e.setAttribute("open","")},remove(t){for(const e of t.querySelectorAll(".js-merge-review-section"))e.removeAttribute("open")}}),(0,u.on)("toggle",".js-details-container .js-merge-review-section",function({currentTarget:t}){const e=t.closest(".js-details-container"),n=e.querySelectorAll(".js-merge-review-section").length,s=e.querySelectorAll(".js-merge-review-section[open]").length;s===0?(0,we.Qp)(e,{force:!1}):s===n&&(0,we.Qp)(e,{force:!0})},{capture:!0}),(0,l.N7)("poll-include-fragment[data-to-be-polled]",{constructor:Qt.Z,add(t){function e(){t.src=t.getAttribute("data-to-be-polled"),t.removeAttribute("data-to-be-polled")}i(e,"onVisible"),document.hidden?document.addEventListener("visibilitychange",e,{once:!0}):e()}});var qe=d(84028);let Me=!1;document.addEventListener("keydown",function(t){t.key==="Alt"&&(Me=!0)}),document.addEventListener("keyup",function(t){t.key==="Alt"&&(Me=!1)}),(0,u.on)("click",".js-toggle-outdated-comments",function(t){if(!(t instanceof MouseEvent&&t.altKey||Me)||!(t.currentTarget instanceof HTMLElement))return;const e=t.currentTarget,n=e.closest("details");function s(){const o=n.hasAttribute("open");for(const r of document.querySelectorAll(".js-toggle-outdated-comments"))r!==e&&r.closest("details").toggleAttribute("open",o)}i(s,"toggleAll"),setTimeout(()=>{(0,qe.uQ)(e,s)})});function st(){const t=document.querySelectorAll(".pull-request-ref-restore");for(let e=0;e<t.length;e++)t[e].classList.toggle("last",e===t.length-1)}i(st,"syncLast"),(0,l.N7)(".pull-request-ref-restore",{add:st,remove:st});function ot(){const t=document.querySelector("#js-pull-restorable")!=null,e=document.querySelector(".js-pull-discussion-timeline");e&&e.classList.toggle("is-pull-restorable",t)}i(ot,"syncRestorable"),(0,l.N7)("#js-pull-restorable",{add:ot,remove:ot});var Xt=d(42650);function Yt(t,e){const n=t.closest(".js-review-state-classes"),s=document.querySelector(".js-review-changes");n.classList.toggle("is-review-pending",e>0);for(const o of document.querySelectorAll(".js-pending-review-comment-count"))o.textContent=String(e);for(const o of document.querySelectorAll(".js-pending-comment-count-type"))o instanceof HTMLElement&&(o.textContent=o.getAttribute(e===1?"data-singular-string":"data-plural-string"));if(e>0){s.textContent=s.getAttribute("data-pending-message")||"";const o=t.querySelector(".js-reviews-toggle");o.classList.add("anim-pulse-in"),o.addEventListener("animationend",()=>o.classList.remove("anim-pulse-in"),{once:!0})}else s.textContent=s.getAttribute("data-message")||""}i(Yt,"updatePendingCommentsCount");function it(t){const e=document.querySelector(".js-reviews-container");e&&setTimeout(()=>Yt(e,t))}i(it,"updatePendingHandler"),(0,x.AC)(".js-inline-comment-form",async function(t,e){const n=await e.text();it(n.json.pendingReviewCommentsCount)}),(0,x.AC)(".js-pending-review-comment .js-comment-delete",async function(t,e){const n=await e.text();it(n.json.pendingReviewCommentsCount)}),(0,x.AC)(".js-resolvable-timeline-thread-form",async function(t,e){try{const n=await e.html();t.closest(".js-resolvable-timeline-thread-container").replaceWith(n.html)}catch{(0,Xt.v)()}}),(0,u.on)("click",".js-resolvable-thread-toggler",function(t){t.target instanceof HTMLElement&&rt(t.target)}),(0,x.AC)(".js-toggle-user-reviewed-file-form",async function(t,e){const n=t.closest(".js-details-container"),s=!!n.querySelector(".js-reviewed-file"),o=n.classList.contains("open"),r=n.querySelector(".js-file-header"),c=r?r.getBoundingClientRect().top===60:!1;(!s&&o||s&&!o)&&((0,we.Qp)(n),c&&(0,T.zT)(n));const f=t.querySelector(".js-reviewed-toggle");s?(f.classList.remove("color-bg-accent","color-border-accent"),f.classList.add("color-fg-muted","color-border-default")):(f.classList.remove("color-fg-muted","color-border-default"),f.classList.add("color-bg-accent","color-border-accent"));const M=f.querySelector(".js-reviewed-checkbox");M.disabled=!0;const C=document.querySelector("progress-bar");C instanceof Ae&&(s?C.decrement():C.increment());const A=document.getElementById(`file-tree-item-${n.id}`);A&&A.toggleAttribute("data-file-user-viewed");const N=await e.html(),V=t.closest(".js-replace-file-header-review");V&&(V.replaceWith(N.html),n.toggleAttribute("data-file-user-viewed"))}),(0,j.Z)(()=>{const t=window.location.hash.slice(1);if(!t)return;const e=document.getElementById(t);if(!e)return;const n=e.closest(".js-resolvable-thread-contents");n!==null&&n.classList.contains("d-none")&&rt(e)});function rt(t){const e=t.closest(".js-resolvable-timeline-thread-container");e.querySelector(".js-resolvable-thread-toggler-container").classList.toggle("border-bottom"),e.querySelector(".js-resolvable-thread-contents").classList.toggle("d-none");for(const s of e.querySelectorAll(".js-resolvable-thread-toggler"))s.classList.toggle("d-none")}i(rt,"toggleResolvableThread");function _e(t){return t.getAttribute("ratio").split("/")}i(_e,"parseRatio");function ct(t){if(t){const[e,n]=_e(t),s=parseInt(e)/parseInt(n),o=t.querySelector(".js-review-progress"),r=t.querySelector(".js-review-count");o instanceof HTMLElement&&r&&(o.style.width=`${s*100}%`,r.textContent=`${e} / ${n}`)}}i(ct,"refresh");class Ae extends HTMLElement{static get observedAttributes(){return["ratio"]}attributeChangedCallback(e){e==="ratio"&&ct(this)}connectedCallback(){ct(this)}increment(){const[e,n]=_e(this),s=Math.min(parseInt(e)+1,parseInt(n));this.setAttribute("ratio",`${s}/${n}`)}decrement(){const[e,n]=_e(this),s=Math.min(parseInt(e)-1,parseInt(n));this.setAttribute("ratio",`${s}/${n}`)}}i(Ae,"ProgressBarElement"),window.customElements.get("progress-bar")||(window.ProgressBarElement=Ae,window.customElements.define("progress-bar",Ae));var Jt=d(2998),en=d(4463),tn=d(61257);document.addEventListener("pjax:end",function(){for(const t of document.querySelectorAll(".js-pull-refresh-on-pjax"))(0,tn.x0)(t)}),(0,l.N7)(".js-updating-pull-request-commits-count",{add(t){const e=t.textContent,n=document.querySelectorAll(".js-updateable-pull-request-commits-count");for(const s of n)s.textContent=e}}),(async()=>{if(await Jt.x,window.performance&&window.performance.navigation&&window.performance.navigation.type===window.performance.navigation.TYPE_RELOAD){const t=document.getElementById("js-report-pull-request-refresh");t&&(0,en.Fk)(t)}})();var lt=d(7358),nn=d(49938);function sn(t){const e=t.querySelector(".js-diff-entry-loader"),n=t.querySelector(".js-diff-placeholder"),s=t.querySelector("button.js-diff-load"),o=t.querySelector(".js-button-text");n.setAttribute("fill","url('#animated-diff-gradient')"),o.textContent=s.getAttribute("data-disable-with")||"",s.disabled=!0;const r=new URL(e.getAttribute("data-fragment-url")||"",window.location.origin);return e.src=r.toString(),e.data}i(sn,"expander_loadDiff");function Ee(t){(0,we.O4)(t),(0,T.zT)(t)}i(Ee,"scrollIntoView"),(0,j.Z)(i(function(){const e=on(window.location.hash);!e||(0,be.Q)(document,e.hashFragment)&&!e.lastLine||ke(e,0)},"handleHashChange"));function on(t){if(!t)return;const e=(0,nn.s)(t);if(!e)return;const n=e[1],s=e[2],o=e[3],r=e[5],c=n+s+o,f=n+s;return{anchor:n,side:s,line:o,lastLine:r,hashFragment:c,partialHashFragment:f}}i(on,"parseExpansion");async function ke(t,e){const{anchor:n,side:s,line:o,lastLine:r,hashFragment:c,partialHashFragment:f}=t,M=(0,be.Q)(document,n);if(!M)return;const C=M.nextElementSibling;if(!C)return;const A=ut(C,s,o,r);if(!A.length){const Z=(0,be.Q)(document,c);if(Z){Ee(Z);return}const F=C.querySelector(".js-diff-load-container");if(!F)return;try{await sn(F);const ne=(0,be.Q)(document,c);ne instanceof HTMLElement&&Ee(ne)}catch{Ee(C)}return}await rn(A,f);const N=1,V=(0,be.Q)(document,c);ut(C,s,o,r).length?ke(t,e):V?Ee(V):e<N&&ke(t,e+1)}i(ke,"findAndActivateExpander"),(0,u.on)("click",".js-expand",function(t){t.preventDefault(),at(t.currentTarget)});function rn(t,e){return Promise.all(t.map(n=>at(n,e)))}i(rn,"activateExpanders");async function at(t,e){let n;if(e){const A=e.slice(-1)==="R"?"data-right-range":"data-left-range",N=t.getAttribute(A)||"",V=parseInt(N.split("-")[0],10);n=e+V}else n=t.hash.slice(1);const s=t.getAttribute("data-url"),o=new URL(s,window.location.origin),r=new URLSearchParams(o.search.slice(1));r.append("anchor",n),o.search=r.toString(),window.location.hash!==""&&window.history.replaceState(null,"","#");const c=await(0,m.a)(document,o.toString()),f=t.closest(".js-file");if(!f)return;const M=t.closest(".js-expandable-line"),C=dt(M,".file-diff-line");C?(0,qe.uQ)(C,()=>{M.replaceWith(c)}):M.replaceWith(c),(0,u.f)(f,"expander:expanded"),cn(f)}i(at,"activateExpander");function dt(t,e){const n=t.nextElementSibling;return n instanceof HTMLElement&&n.matches(e)?n:null}i(dt,"expander_next");function ut(t,e,n,s){const o=parseInt(n,10),r=parseInt(s||"",10);return Array.from(t.querySelectorAll(".js-expand")).filter(c=>{const f=e==="R"?"data-right-range":"data-left-range",M=(c.getAttribute(f)||"").split("-"),C=parseInt(M[0],10),A=parseInt(M[1],10);return C<=o&&o<=A||o<=C&&A<=r?!0:C<=r&&r<=A})}i(ut,"findExpanders");function cn(t){const e=t.querySelector(".js-expand-full-wrapper");if(!e)return;Array.from(t.querySelectorAll(".js-expand")).length===0&&e.parentElement.removeChild(e)}i(cn,"removeExpandAllButton");async function ln(t,e){const n=await self.fetch(e,{headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!n.ok)throw new Error(`Request to blob_expand failed with status code ${n.status}`);return(0,lt.t)((0,lt.P)(t),n,!0),(await n.json()).map(o=>({...o,content:(0,g.r)(t,o.content)}))}i(ln,"fetchManySafeDocumentFragments"),(0,u.on)("click",".js-expand-full",async t=>{t.preventDefault();const e=t.currentTarget,n=e.closest(".file"),s=e.getAttribute("data-url"),o=dn(n);if(o.length===0)return;const r=new URL(s,window.location.origin),c=new URLSearchParams(r.search.slice(1));for(const A of o)c.append("ranges[]last_left",A.left.start),c.append("ranges[]left",A.left.end),c.append("ranges[]left_hunk_size",A.left.size),c.append("ranges[]last_right",A.right.start),c.append("ranges[]right",A.right.end),c.append("ranges[]right_hunk_size",A.right.size),c.append("ranges[]position",A.position);r.search=c.toString();const f=await ln(document,r.toString()),M=[...n.querySelectorAll(".js-expand")];for(const{content:A,position:N}of f){const V=parseInt(N,10),ee=M[V];if(!ee)return;const Z=ee.closest(".js-expandable-line"),F=dt(Z,".file-diff-line");F?(0,qe.uQ)(F,()=>{Z.after(A)}):Z.after(A),Z.setAttribute("hidden","true")}e.setAttribute("hidden","true");const C=n.querySelector(".js-collapse-diff");C&&C.removeAttribute("hidden"),n.classList.add("open"),n.classList.add("Details--on")}),(0,u.on)("click",".js-collapse-diff",t=>{const e=t.currentTarget,n=e.closest(".file"),s=[...n.querySelectorAll('.blob-expanded[data-expanded-full="true"]')];for(const c of s)c.parentElement.removeChild(c);const o=[...n.querySelectorAll(".js-expandable-line")];for(const c of o)c.removeAttribute("hidden");e.setAttribute("hidden","true");const r=n.querySelector(".js-expand-full");r&&r.removeAttribute("hidden")});function an(t,e){const s=new URL(t.getAttribute("data-url"),window.location.origin).searchParams;return{position:e.toString(),left:{start:s.get("last_left"),end:s.get("left"),size:s.get("left_hunk_size")},right:{start:s.get("last_right"),end:s.get("right"),size:s.get("right_hunk_size")}}}i(an,"getExpanderRange");function dn(t){const n=Array.from(t.querySelectorAll(".js-expand")).map((r,c)=>an(r,c));let s=!1;const o=[];for(let r=0;r<n.length;r++){if(s){s=!1;continue}const c=n[r],f=n[r+1];s=f&&c.left.start===f.left.start&&c.left.end===f.left.end&&c.right.start===f.right.start&&c.right.end===f.right.end,o.push(c)}return o}i(dn,"getAllHunkRanges");class xe{constructor(e){this.selection=e,this.anchorNode=e.anchorNode}range(){var e;let n;return((e=this.selection)==null?void 0:e.rangeCount)>0&&(n=this.selection.getRangeAt(0)),n}canBeSideProtected(){try{return!!(this.hasSelectedText()&&this.confinedTable())}catch{return!1}}isSideProtected(){var e;try{return!!((e=this.confinedTable())==null?void 0:e.getAttribute("data-lock-side-selection"))}catch{return!1}}hasSelectedText(){const e=this.range();return e?e.toString().length>0:!1}clearSelectedText(){this.selection.removeAllRanges()}confinedTable(){var e,n;const s=(n=(e=this.range())==null?void 0:e.commonAncestorContainer)==null?void 0:n.parentElement;return(s==null?void 0:s.matches(".diff-table"))?s:(s==null?void 0:s.matches(".js-file-content"))?s==null?void 0:s.querySelector("table.diff-table"):s==null?void 0:s.closest("table.diff-table")}unprotectedSide(){var e,n;let s;return this.anchorNode instanceof HTMLTableCellElement?s=this.anchorNode.closest("td[data-split-side]"):s=(n=(e=this.anchorNode)==null?void 0:e.parentElement)==null?void 0:n.closest("td[data-split-side]"),s==null?void 0:s.getAttribute("data-split-side")}protectedSide(){return this.unprotectedSide()==="left"?"right":"left"}applySideProtection(){if(this.unprotectedSide()){const e=this.confinedTable(),n=this.unprotectedSide();e&&n&&e.setAttribute("data-lock-side-selection",n)}}clearSideProtection(){const e=document.querySelectorAll("table[data-lock-side-selection]");for(const n of e)n.removeAttribute("data-lock-side-selection")}filteredTableRows(){const e=[];for(let n=0;n<this.selection.rangeCount;n++){const o=this.selection.getRangeAt(n).cloneContents();if(o.querySelectorAll("td").length){const r=`td[data-split-side=${this.protectedSide()}], td.js-linkable-line-number, td.empty-cell`,c=o.querySelectorAll(r);for(const f of c)f.parentNode&&f.parentNode.removeChild(f);e.push(...o.children)}else{const r=document.createElement("TR"),c=document.createElement("TD");c.append(...o.childNodes),r.append(c),e.push(r)}}return e}contentToString(){var e;const n=[],s=document.createElement("table");s.classList.add("invisible"),s.append(...this.filteredTableRows()),(e=this.confinedTable())==null||e.append(s);const o=s.children;for(let r=0;r<o.length;r++){const f=o[r].innerText;f&&(f===`
`?n.push(""):n.push(f))}return s.remove(),n.join(`
`)}}i(xe,"DiffTableSideProtection");function ft(t){return Math.floor(t/2)}i(ft,"tableSide");function Ie(t,e){const n=t.parentElement;if(!n)return;const s=n.children;let o;if(s.length===4)for(let r=0,c=s.length;r<c;r++)s[r]===t&&(o=ft(r));for(let r=0,c=s.length;r<c;r++){const f=s[r];(o==null||ft(r)===o)&&f.classList.toggle("is-hovered",e)}}i(Ie,"onHover"),(0,l.N7)(".diff-table",function(t){let e=null;function n(){e&&Ie(e,!1),e=null}i(n,"onMouseEnter");function s(c){e&&Ie(e,!1),c.target instanceof HTMLElement&&(e=c.target.closest("td.blob-code"),e&&Ie(e,!0))}i(s,"onMouseOver");function o(){t.addEventListener("mouseenter",n),t.addEventListener("mouseleave",n),t.addEventListener("mouseover",s)}i(o,"add");function r(){t.removeEventListener("mouseenter",n),t.removeEventListener("mouseleave",n),t.removeEventListener("mouseover",s)}return i(r,"remove"),{add:o,remove:r}});function mt(t){var e;const n=document.getSelection();if(n){const s=new xe(n);s.isSideProtected()&&((e=t.clipboardData)==null||e.setData("text/plain",s.contentToString()),t.preventDefault())}}i(mt,"copySidedContent");function gt(t){const e=document.getSelection(),n=t.button===2;if(e&&!n){const s=new xe(e);s.isSideProtected()&&(s.clearSelectedText(),s.clearSideProtection())}}i(gt,"clearSidedProtection");function ht(){const t=document.getSelection();if(t){const e=new xe(t);e.canBeSideProtected()?e.applySideProtection():e.clearSideProtection()}}i(ht,"protectSidedContent"),(0,l.N7)(".js-diff-container",function(){function t(){document.addEventListener("copy",mt),document.addEventListener("mousedown",gt),document.addEventListener("selectionchange",ht)}i(t,"add");function e(){document.removeEventListener("copy",mt),document.removeEventListener("mousedown",gt),document.removeEventListener("selectionchange",ht)}return i(e,"remove"),{add:t,remove:e}});var wn=d(58561);function ge(){const t=document.querySelector("meta[name=diff-view]"),e=t&&t instanceof HTMLMetaElement?t.content:"",n=document.querySelector(".js-file-diff-split"),s=!!(e==="split"&&n||document.querySelector(".wants-full-width-container"));document.body.classList.toggle("full-width",s)}i(ge,"syncBodyClass"),(0,l.N7)("meta[name=diff-view]",{add:ge,remove:ge}),(0,l.N7)(".js-file-diff-split",{add:ge,remove:ge}),(0,l.N7)(".js-compare-tab.selected",{add:ge,remove:ge}),(0,l.N7)(".wants-full-width-container",{add:ge,remove:ge}),(0,u.on)("change",".js-toggle-file-notes",function(t){const e=t.currentTarget;e.closest(".file").classList.toggle("show-inline-notes",e.checked)});function pt(t){const e=t.some(n=>n.checked);for(const n of t)(0,te.Se)(n,!e)}i(pt,"toggleCheckboxes"),(0,u.on)("click",".js-toggle-all-file-notes",function(t){const e=Array.from(document.querySelectorAll(".js-toggle-file-notes"));pt(e),t.preventDefault()}),(0,u.on)("click",".js-toggle-all-file-annotations",function(t){const e=Array.from(document.querySelectorAll(".js-toggle-file-check-annotations"));pt(e),t.preventDefault()}),(0,l.N7)(".js-inline-comments-container",function(t){let e;const n=t.closest(".file");if(n)return{add:e=i(function(){const o=n.querySelector(".js-inline-comments-container")!=null;n.classList.toggle("has-inline-notes",o)},"remove"),remove:e}}),(0,u.on)("change",".js-toggle-file-check-annotations",function(t){const e=t.currentTarget,n=e.closest(".file").querySelectorAll(".js-inline-annotations");for(const s of n)s instanceof HTMLElement&&(s.hidden=!e.checked)});function bt(t){const e=t.parentElement,n=e.querySelectorAll("td.js-line-comments").length,s=e.querySelectorAll("td.js-line-comments.is-collapsed").length;e.classList.toggle("is-collapsed",s>0&&n===s)}i(bt,"updateRow"),(0,l.N7)("td.js-line-comments.is-collapsed",{add:bt,remove:bt});var un=d(13802),fn=Object.defineProperty,mn=Object.getOwnPropertyDescriptor,he=i((t,e,n,s)=>{for(var o=s>1?void 0:s?mn(e,n):e,r=t.length-1,c;r>=0;r--)(c=t[r])&&(o=(s?c(e,n,o):c(o))||o);return s&&o&&fn(e,n,o),o},"diff_file_filter_element_decorateClass");let fe=i(class extends HTMLElement{connectedCallback(){this.filterState={hideDeletedFiles:!1,hideViewedFiles:!1,showManifestFilesOnly:!1,selectedOwners:[],showCodeownersFiles:!1,selectedFileTypes:[],fileTypeFilterActive:!1,filtersActive:!1}}applyFilter(t){this.filterState=t.detail,this.showResetFilters(),this.filterFiles(),this.filterTreeFiles(),this.hideEmptyDirectories(),this.showBlankslateIfEmpty()}filterFiles(){for(const t of this.diffEntries){const e=t.closest(".js-file.js-details-container");e.hidden=!this.shouldShowFile(t)}}filterTreeFiles(){for(const t of this.treeEntries){const e=this.shouldShowFile(t);t.hidden=!e,t.toggleAttribute("data-skip-substring-filter",!e)}}hideEmptyDirectories(){this.treeRoot&&this.hideEmptyDirectory(this.treeRoot)}hideEmptyDirectory(t){const e=t.getAttribute("data-tree-entry-type")==="root",n=t.getAttribute("data-tree-entry-type")==="directory";if(e||n){const s=t.querySelectorAll(e?":scope > .js-tree-node":":scope > ul > .js-tree-node");let o=0;for(const r of s)o=o+this.hideEmptyDirectory(r);return o===0?(t.hidden=!0,0):(t.hidden=!1,1)}return t.hidden?0:1}async refilterAfterAsyncLoad(){await Promise.resolve(),this.refilterLoadedFiles(),this.showBlankslateIfEmpty()}refilterLoadedFiles(){this.filterState.filtersActive&&this.filterFiles()}shouldShowFile(t){let e=!0;const n=t.getAttribute("data-file-type");return n&&(e=this.filterState.selectedFileTypes.includes(n)),this.filterState.hideViewedFiles&&e&&t.hasAttribute("data-file-user-viewed")&&(e=!1),this.filterState.showCodeownersFiles&&e&&(e=(t.getAttribute("data-codeowners")||"").split(",").filter(o=>this.filterState.selectedOwners.includes(o)).length>0),this.filterState.hideDeletedFiles&&e&&t.getAttribute("data-file-deleted")==="true"&&(e=!1),this.filterState.showManifestFilesOnly&&e&&(t.hasAttribute("data-file-manifest")||(e=!1)),e}showResetFilters(){this.resetFilters&&(this.resetFilters.hidden=!this.filterState.filtersActive)}showBlankslateIfEmpty(){if(!this.blankslate)return;if(this.progressiveLoaders.length>0){this.blankslate.hidden=!0;return}if(this.diffEntries.length===0){this.blankslate.hidden=!0;return}const t=Array.from(this.diffEntries).some(e=>!e.hidden);this.blankslate.hidden=t}},"DiffFileFilterElement");he([ie.fA],fe.prototype,"blankslate",2),he([ie.fA],fe.prototype,"resetFilters",2),he([ie.GO],fe.prototype,"diffEntries",2),he([ie.GO],fe.prototype,"progressiveLoaders",2),he([ie.GO],fe.prototype,"treeEntries",2),he([ie.fA],fe.prototype,"treeRoot",2),he([(0,un.D)(20)],fe.prototype,"hideEmptyDirectories",1),fe=he([ie.Ih],fe);var gn=d(18137),hn=Object.defineProperty,pn=Object.getOwnPropertyDescriptor,bn=i((t,e,n,s)=>{for(var o=s>1?void 0:s?pn(e,n):e,r=t.length-1,c;r>=0;r--)(c=t[r])&&(o=(s?c(e,n,o):c(o))||o);return s&&o&&hn(e,n,o),o},"input_demux_context_wrapper_decorateClass");class yt{onItemSelected(e){if(!(e.currentTarget instanceof HTMLButtonElement))return;const n=e.currentTarget.querySelector(".js-ref-name").textContent,s=document.querySelector(".js-new-base-branch");s.value=btoa(n||"");const o=document.querySelector(".js-change-base-template").content.cloneNode(!0);o instanceof DocumentFragment&&(0,gn.W)({content:o})}}i(yt,"InputDemuxBaseChangeContext");let vt=i(class extends HTMLElement{connectedCallback(){const t=this.getAttribute("data-context-type"),e={baseChange:new yt};this.context=e[t]}onItemSelected(t){this.context.onItemSelected(t)}},"InputDemuxContextWrapperElement");vt=bn([ie.Ih],vt);var Ln=d(88434),An=d(35018),En=d(19364)},99481:(G,$,d)=>{d.d($,{O4:()=>B,jo:()=>D,Qp:()=>b});var u=d(47789),T=d(11427);const E="ontransitionend"in window;function P(w,R){if(!E){R();return}const W=Array.from(w.querySelectorAll(".js-transitionable"));w.classList.contains("js-transitionable")&&W.push(w);for(const O of W){const J=j(O);O instanceof HTMLElement&&(O.addEventListener("transitionend",()=>{O.style.display="",O.style.visibility="",J&&l(O,function(){O.style.height=""})},{once:!0}),O.style.boxSizing="content-box",O.style.display="block",O.style.visibility="visible",J&&l(O,function(){O.style.height=getComputedStyle(O).height}),O.offsetHeight)}R();for(const O of W)if(O instanceof HTMLElement&&j(O)){const J=getComputedStyle(O).height;O.style.boxSizing="",J==="0px"?O.style.height=`${O.scrollHeight}px`:O.style.height="0px"}}i(P,"performTransition");function j(w){return getComputedStyle(w).transitionProperty==="height"}i(j,"isTransitioningHeight");function l(w,R){w.style.transition="none",R(),w.offsetHeight,w.style.transition=""}i(l,"withoutTransition");var v=d(84028);function S(w,R){R.find(W=>{const O=w.querySelectorAll(W),J=O[O.length-1];if(J&&document.activeElement!==J)return J.focus(),!0})}i(S,"findAndFocusByQuerySelector");function a(w){S(w,[".js-focus-on-dismiss","input[autofocus], textarea[autofocus]"])}i(a,"restoreAutofocus");function p(w){!w.classList.contains("tooltipped")||(w.classList.remove("tooltipped"),w.addEventListener("mouseleave",()=>{w.classList.add("tooltipped"),w.blur()},{once:!0}))}i(p,"hideTooltip");function h(w){return[...document.querySelectorAll(".js-details-container")].filter(R=>R.getAttribute("data-details-container-group")===w)}i(h,"groupMembers");function L(w){return[...w.querySelectorAll(".js-details-target")].filter(R=>R.closest(".js-details-container")===w)}i(L,"containerTargets");function _(w,R){const W=w.getAttribute("data-details-container-group");return W?((0,v.uQ)(w,()=>{for(const O of h(W))O!==w&&k(O,R)}),W):null}i(_,"toggleGroup");function k(w,R){w.classList.toggle("open",R),w.classList.toggle("Details--on",R);for(const W of L(w))W.setAttribute("aria-expanded",R.toString())}i(k,"updateOpenState");function b(w,R){var W,O;const J=w.getAttribute("data-details-container")||".js-details-container",se=w.closest(J),oe=(W=R==null?void 0:R.force)!=null?W:!se.classList.contains("open"),ae=(O=R==null?void 0:R.withGroup)!=null?O:!1;P(se,()=>{k(se,oe);const y=ae?_(se,oe):null;Promise.resolve().then(()=>{a(se),p(w),se.dispatchEvent(new CustomEvent("details:toggled",{bubbles:!0,cancelable:!1,detail:{open:oe}})),y&&se.dispatchEvent(new CustomEvent("details:toggled-group",{bubbles:!0,cancelable:!1,detail:{open:oe,group:y}}))})})}i(b,"toggleDetailsTarget");function D(w){const R=w.getAttribute("data-details-container")||".js-details-container",O=w.closest(R).classList;return O.contains("Details--on")||O.contains("open")}i(D,"isDetailsTargetExpanded");function q(w){const R=w.altKey,W=w.currentTarget;b(W,{withGroup:R}),w.preventDefault()}i(q,"handleDetailsTargetClick"),(0,T.on)("click",".js-details-target",q),(0,u.Z)(function({target:w}){w&&B(w)});function B(w){let R=!1,W=w.parentElement;for(;W;)W.classList.contains("Details-content--shown")&&(R=!0),W.classList.contains("js-details-container")&&(W.classList.toggle("open",!R),W.classList.toggle("Details--on",!R),R=!1),W=W.parentElement}i(B,"ensureExpanded")},47789:(G,$,d)=>{d.d($,{Z:()=>P});var u=d(2998);const T=[];let E=0;function P(a){(async function(){T.push(a),await u.x,j()})()}i(P,"hashChange"),P.clear=()=>{T.length=E=0};function j(){const a=E;E=T.length,l(T.slice(a),null,window.location.href)}i(j,"runRemainingHandlers");function l(a,p,h){const L=window.location.hash.slice(1),_=L?document.getElementById(L):null,k={oldURL:p,newURL:h,target:_};for(const b of a)b.call(null,k)}i(l,"runHandlers");let v=window.location.href;window.addEventListener("popstate",function(){v=window.location.href}),window.addEventListener("hashchange",function(a){const p=window.location.href;try{l(T,a.oldURL||v,p)}finally{v=p}});let S=null;document.addEventListener("pjax:start",function(){S=window.location.href}),document.addEventListener("pjax:end",function(){l(T,S,window.location.href)})},57147:(G,$,d)=>{d.d($,{h:()=>T});var u=d(11427);(0,u.on)("click",".js-skip-to-content",function(S){const a=document.getElementById("start-of-content");if(a){const p=a.nextElementSibling;p instanceof HTMLElement&&(p.setAttribute("tabindex","-1"),p.setAttribute("data-skipped-to-content","1"),p.focus())}S.preventDefault()});function T(){let S=!1;const a=document.getElementById("start-of-content");if(a){const p=a.nextElementSibling;if(p instanceof HTMLElement)return S=p.getAttribute("data-skipped-to-content")==="1",S&&p.removeAttribute("data-skipped-to-content"),S}}i(T,"hasSkippedToContent");const E="ontouchstart"in document;function P(){return window.innerWidth>1012}i(P,"compatibleDesktop");for(const S of document.querySelectorAll(".HeaderMenu-details"))S.addEventListener("toggle",l),E||(S.addEventListener("mouseover",v),S.addEventListener("mouseleave",v));let j=!1;function l(S){if(!j){j=!0;for(const a of document.querySelectorAll(".HeaderMenu-details"))a!==S.currentTarget&&a.removeAttribute("open");setTimeout(()=>j=!1)}}i(l,"onMenuToggle");function v(S){const{currentTarget:a}=S;!(a instanceof HTMLElement)||!P()||(S.type==="mouseover"&&S instanceof MouseEvent?S.target instanceof Node&&S.relatedTarget instanceof Node&&a.contains(S.target)&&!a.contains(S.relatedTarget)&&a.setAttribute("open",""):a.removeAttribute("open"))}i(v,"onMenuHover")},13717:(G,$,d)=>{d.d($,{j:()=>P,w:()=>j});var u=d(11427),T=d(36805),E=d(66123);(0,u.on)("click",".js-toggle-inline-comment-form",function(l){const v=l.currentTarget.closest(".js-line-comments");P(v)}),(0,u.on)("quote-selection",".js-line-comments",function(l){P(l.currentTarget)}),(0,E.w4)("keydown",".js-inline-comment-form-container form .js-comment-field",function(l){const v=l.target;if(!v.classList.contains("js-navigation-enable")&&l.key==="Escape"&&v.value.length===0){const S=v.closest("form");j(S),l.preventDefault()}}),(0,u.on)("click",".js-hide-inline-comment-form",function(l){const v=l.currentTarget.closest("form");!(0,T.T)(v)||confirm(l.target.getAttribute("data-confirm-cancel-text"))?j(v):l.preventDefault()});function P(l){var v;const S=l.querySelector(".js-inline-comment-form-container");S.classList.add("open"),(v=S.querySelector(".js-write-tab"))==null||v.click(),S.querySelector(".js-comment-field").focus(),(0,u.f)(S,"inlinecomment:focus")}i(P,"focusForm");function j(l){l.reset();const v=l.closest(".js-inline-comment-form-container");v.classList.remove("open");const S=v.querySelector(".js-multi-line-preview");S&&(S.hidden=!0),(0,u.f)(v,"inlinecomment:collapse")}i(j,"blurForm")},1868:(G,$,d)=>{d.d($,{H:()=>p});var u=d(57147),T=d(2998),E=d(30762);let P=!1,j=0;const l=[];function v(){l.length?S():a()}i(v,"manageObservers");function S(){P||(window.addEventListener("resize",h),document.addEventListener("scroll",h),P=!0)}i(S,"addObservers");function a(){window.removeEventListener("resize",h),document.removeEventListener("scroll",h),P=!1}i(a,"removeObservers");function p(){L(!0)}i(p,"forceStickyRelayout");function h(){L()}i(h,"checkElementsForStickingHandler");function L(y=!1){for(const I of l)if(I.element.offsetHeight>0){const{element:U,placeholder:te,top:m}=I,g=U.getBoundingClientRect();if(te){const x=te.getBoundingClientRect();U.classList.contains("is-stuck")?x.top>oe(U,m)?b(I):D(I):g.top<=oe(U,m)?k(I):y&&D(I)}else g.top-oe(U,m)<.1?k(I):b(I)}}i(L,"checkElementsForSticking");function _(y){const{position:I}=window.getComputedStyle(y);return/sticky/.test(I)}i(_,"browserHasSticky");function k({element:y,placeholder:I,top:U}){if(I){const te=y.getBoundingClientRect();ae(y,oe(y,U)),y.style.left=`${te.left}px`,y.style.width=`${te.width}px`,y.style.marginTop="0",y.style.position="fixed",I.style.display="block"}y.classList.add("is-stuck")}i(k,"pinSet");function b({element:y,placeholder:I}){I&&(y.style.position="static",y.style.marginTop=I.style.marginTop,I.style.display="none"),y.classList.remove("is-stuck")}i(b,"unpinSet");function D({element:y,placeholder:I,offsetParent:U,top:te}){if(I&&!(0,u.h)()){const m=y.getBoundingClientRect(),g=I.getBoundingClientRect();if(ae(y,oe(y,te)),y.style.left=`${g.left}px`,y.style.width=`${g.width}px`,U){const x=U.getBoundingClientRect();x.bottom<m.height+parseInt(String(te))&&(y.style.top=`${x.bottom-m.height}px`)}}}i(D,"updatePinnedSet");function q(y){if(_(y))return null;const I=y.previousElementSibling;if(I&&I.classList.contains("is-placeholder"))return I;const U=document.createElement("div");return U.style.visibility="hidden",U.style.display="none",U.style.height=window.getComputedStyle(y).height,U.className=y.className,U.classList.remove("js-sticky"),U.classList.add("is-placeholder"),y.parentNode.insertBefore(U,y)}i(q,"findOrCreatePlaceholder");function B(y){const I=q(y),U=window.getComputedStyle(y).position;y.style.position="static";const te=y.offsetParent;y.style.position="fixed";const m=se(y),g={element:y,placeholder:I,offsetParent:te,top:m==="auto"?0:parseInt(m||"0")};y.style.position=U,l.push(g)}i(B,"createSet");function w(y){const I=l.map(U=>U.element).indexOf(y);l.splice(I,1)}i(w,"removeSet");async function R(y){await T.C,B(y),L(),v()}i(R,"initializeSet"),(0,E.N7)(".js-sticky",{constructor:HTMLElement,add(y){R(y)},remove(y){w(y),v()}}),(0,E.N7)(".js-notification-top-shelf",{constructor:HTMLElement,add(y){W(y)},remove(){for(const y of document.querySelectorAll(".js-notification-top-shelf"))y.remove();j>0&&(j=0,O(),p())}}),(0,E.N7)(".js-notification-shelf-offset-top, .js-position-sticky",{constructor:HTMLElement,add:J});async function W(y){if(y.offsetParent===null)return;await T.C;const I=Math.floor(y.getBoundingClientRect().height);I>0&&(j=I,O(),p())}i(W,"initializeNotificationShelf");function O(){for(const y of document.querySelectorAll(".js-position-sticky, .js-notification-shelf-offset-top"))J(y)}i(O,"updateTopOffsets");function J(y){if(y.classList.contains("js-notification-top-shelf"))return;const I=parseInt(se(y))||0;ae(y,I+j)}i(J,"updateTopOffset");function se(y){const I=y.getAttribute("data-original-top");if(I!=null)return I;const U=window.getComputedStyle(y).top;return y.setAttribute("data-original-top",U),U}i(se,"getOriginalTop");function oe(y,I){return y.classList.contains("js-notification-top-shelf")?I:I+j}i(oe,"withShelfOffset");function ae(y,I){y.style.setProperty("top",`${I}px`,"important")}i(ae,"setTopImportant")},18137:(G,$,d)=>{d.d($,{W:()=>T});var u=d(11427);async function T(E){const j=document.querySelector("#site-details-dialog").content.cloneNode(!0),l=j.querySelector("details"),v=l.querySelector("details-dialog"),S=l.querySelector(".js-details-dialog-spinner");E.detailsClass&&l.classList.add(...E.detailsClass.split(" ")),E.dialogClass&&v.classList.add(...E.dialogClass.split(" ")),E.label?v.setAttribute("aria-label",E.label):E.labelledBy&&v.setAttribute("aria-labelledby",E.labelledBy),document.body.append(j);const a=await E.content;return S.remove(),v.prepend(a),l.addEventListener("toggle",()=>{l.hasAttribute("open")||((0,u.f)(v,"dialog:remove"),l.remove())}),v}i(T,"dialog")},97424:(G,$,d)=>{d.d($,{X:()=>T});var u=d(68842);function T(E,P,j,l,v,S,a,p){const h=document.querySelector(".js-file-filter"),L=new URL(window.location.href,window.location.origin);if(!E&&!l)return P||S?void 0:(L.search="",(0,u.lO)((0,u.y0)(),"",L.toString()));const _=h.querySelector(".js-file-filter-form"),k=new FormData(_),b=j.filter(B=>!k.getAll("file-filters[]").includes(B)),D=v.filter(B=>!k.getAll("owned-by[]").includes(B));for(const B of b)k.append("file-filters[]",B);for(const B of D)k.append("owned-by[]",B);const q=new URLSearchParams(k);(!q.has("file-filters[]")||q.toString()==="")&&q.set("file-filters[]",""),P&&q.set("w","1"),S&&q.set("manifests","true"),a&&q.set("show-deleted-files","false"),p&&q.set("show-viewed-files","false"),q.delete("authenticity_token"),L.search=q.toString(),(0,u.lO)((0,u.y0)(),"",L.toString())}i(T,"updateURLState")},49938:(G,$,d)=>{d.d($,{s:()=>u});function u(T){const E=T.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(E!=null&&E.length===6)return E;const P=T.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return P!=null&&P.length===6?P:null}i(u,"matchHash")},23343:(G,$,d)=>{d.d($,{MO:()=>q,vu:()=>_,Oz:()=>b});var u=d(67647);class T{constructor(g,x,H){this.diffId=g,this.side=x,this.lineNumber=H,this.element=(0,u.Q)(document,this.anchor())}sideForCommenting(){return this.element&&this.element.classList.contains("blob-num-context")?"right":{R:"right",L:"left"}[this.side]}isContext(){return this.element?this.element.classList.contains("blob-num-context"):!1}anchor(){return`${this.diffId}${this.anchorSuffix()}`}anchorSuffix(){return`${this.side}${this.lineNumber}`}is(g){return this.diffId===g.diffId&&this.side===g.side&&this.lineNumber===g.lineNumber}}i(T,"DiffPosition");class E{constructor(g,x,H,Q,z){this.elements=new Set,this.isParsed=!1,this.isSplit=!1,this._rows=new Set,this._isAcrossHunks=!1,this._isContextOnly=!0,this._includesExpandedLine=!1,this._commentOutsideTheDiff=!1,this.diffId=g,this.diffTable=document.querySelector(`.js-diff-table[data-diff-anchor="${g}"]`),this.diffTable&&(this.isSplit=this.diffTable.classList.contains("js-file-diff-split")),this.start=new T(g,x,H),this.end=new T(g,Q,z),this.lineCount=0,this.parse()}anchor(){const g=[];return g.push(this.start.anchor()),this.start.is(this.end)||g.push(this.end.anchorSuffix()),g.join("-")}parse(){if(!this.diffTable)return;let g=this.unify(this.diffTable.querySelectorAll(".js-linkable-line-number"));g=this.filterInRange(g),this.lineCount=g.length,this.elements=this.expandRelatedElements(g),this._commentOutsideTheDiff=this.diffTable.classList.contains("js-comment-outside-the-diff"),this.isParsed=!0}unify(g){if(!this.isSplit)return Array.from(g);const x=[];let H=[],Q=[];for(const z of g)z.classList.contains("blob-num-addition")?H.push(z):z.classList.contains("blob-num-deletion")?Q.push(z):(x.push(...Q,...H,z),H=[],Q=[]);return x.push(...Q,...H),x}filterInRange(g){if(!this.start.element||!this.end.element)return[];let x=g.indexOf(this.start.element),H=g.indexOf(this.end.element);if(x>H){[x,H]=[H,x];const[Q,z]=[this.end,this.start];this.start=Q,this.end=z}return g.slice(x,H+1)}isContextOnly(){return this.isParsed||this.parse(),this._isContextOnly}isAcrossHunks(){return this.isParsed||this.parse(),this._isAcrossHunks}includesExpandedLine(){return this.isParsed||this.parse(),this._includesExpandedLine}commentOutsideTheDiffEnabled(){return this.isParsed||this.parse(),this._commentOutsideTheDiff}rows(){return this.isParsed||this.parse(),this._rows}expandRelatedElements(g){const x=this.isSplit,H=g[0],Q=g[g.length-1];if(H&&Q){const Y=H.closest("[data-hunk]"),K=Q.closest("[data-hunk]");if(Y&&K){const X=Y.getAttribute("data-hunk"),re=K.getAttribute("data-hunk");X!==re&&(this._isAcrossHunks=!0)}}const z=i((Y,K)=>{!this._includesExpandedLine&&K.closest(".blob-expanded")&&(this._includesExpandedLine=!0);const X=K.parentElement;X instanceof HTMLElement&&this._rows.add(X);const re=K.classList.contains("blob-num-deletion")||K.classList.contains("blob-num-addition");if(re&&(this._isContextOnly=!1),!X)return Y;if(x&&re)return Array.from(X.children).indexOf(K)<2?Y.add(X.children[0]).add(X.children[1]):Y.add(X.children[2]).add(X.children[3]);for(const ue of Array.from(X.children))Y.add(ue);return Y},"expander");return g.reduce(z,new Set)}}i(E,"DiffRange");var P=d(47789),j=d(49938),l=d(30762),v=d(11427),S=d(4463);let a=null,p=null,h=!1,L=null;function _(){return a}i(_,"getCurrentRange");function k(m){return!!m.closest(".js-multi-line-comments-enabled")}i(k,"isMultiLineCommentingEnabled");function b(m,g){if(!k(m))return!1;const{start:{lineNumber:x},end:{lineNumber:H}}=g;return!(x===H&&g.isContextOnly()||!g.commentOutsideTheDiffEnabled()&&(g.isAcrossHunks()||g.includesExpandedLine()))}i(b,"isMultiLineCommentAllowed");function D(m){return m.closest(".js-diff-table").classList.contains("is-selecting")}i(D,"isSelecting");function q(){window.history.replaceState(null,"","#"),U()}i(q,"clearSelection");function B(m,g){let x=m.id;if(g){const H=(0,j.s)(x);if(!H)return;const Q=H[1],z=H[2],Y=H[3];if(a&&a.diffId===Q){if(z===a.start.side&&Y<a.start.lineNumber)return;const K=new E(Q,a.start.side,a.start.lineNumber,z,+Y);x=K.anchor();const X=m.closest(".js-file-content[data-hydro-view]");X instanceof HTMLElement&&te(X,K),h&&D(m)&&m.closest(".js-diff-table").classList.toggle("is-commenting",b(m,K)),p=i(function(){if(b(m,K)){const ue=`.js-add-line-comment[data-side="${K.end.sideForCommenting()}"]`,je=m.closest("tr").querySelector(ue);je&&K&&je.click()}},"showMultiLineCommentForm")}}window.history.replaceState(null,null,`#${x}`),U()}i(B,"setSelection");function w(m){if(!(m instanceof HTMLElement))return null;if(m.classList.contains("js-linkable-line-number"))return m;const g=m.previousElementSibling;return g?w(g):null}i(w,"nearestLinkableLineNumber");function R(m){!a||m.target.closest(".js-diff-table")||(window.history.replaceState(null,null,"#"),U())}i(R,"handleClick");function W(){if(!L)return;B(L,!1);const m=L.closest(".js-diff-table");L=null,m.classList.add("is-selecting"),m.classList.add("is-commenting"),document.addEventListener("mouseup",function(g){m.classList.remove("is-selecting"),m.classList.remove("is-selecting","is-commenting"),p&&p(),p=null,ae(m),g.preventDefault()},{once:!0})}i(W,"beginDrag");function O(m){const g=w(m);!g||!D(g)||B(g,!0)}i(O,"commentSelectionMouseverToCode");function J(m){!D(m)||B(m,!0)}i(J,"commentSelectionMouseverToLineNumbers");function se(m){const g=m.target;if(!(g instanceof Element))return;L&&W();const x=g.closest(".blob-code, .js-linkable-line-number");if(!!x){if(x.classList.contains("blob-code"))return O(x);x.classList.contains("js-linkable-line-number")&&J(x)}}i(se,"handleDragMouseEvent");function oe(m){m.addEventListener("mouseenter",se,{capture:!0})}i(oe,"addCommentSelectionEvents");function ae(m){h=!1,m.removeEventListener("mouseenter",se,{capture:!0}),setTimeout(()=>{document.addEventListener("click",R,{once:!0})},0)}i(ae,"removeCommentSelectionEvents"),(0,v.on)("mousedown",".js-add-line-comment",function(m){if(!(m instanceof MouseEvent)||m.button!==0)return;const g=m.target.parentElement;if(!g||!k(m.target))return;const x=w(g);if(!x)return;const H=m.target.closest(".js-diff-table");oe(H),L=x,h=!0,m.target.addEventListener("mouseup",function(){ae(H),L=null,h=!1},{once:!0}),a&&a.lineCount>1&&m.preventDefault()}),(0,v.on)("mousedown",".js-linkable-line-number",function(m){if(!(m instanceof MouseEvent)||m.button!==0)return;const g=m.target;if(!(g instanceof Element))return;const x=g.closest(".js-diff-table");x.classList.add("is-selecting"),oe(x),document.addEventListener("mouseup",function(){g.closest(".js-diff-table").classList.remove("is-selecting"),ae(x)},{once:!0}),B(g,m instanceof MouseEvent&&m.shiftKey),m.preventDefault()});function y(){if(!a)return;for(const z of a.elements)z.classList.add("selected-line");const m=[],g=[],x=[],H=[];for(const z of a.rows()){const[Y,K,X,re]=z.children;m.push(Y),g.push(K),x.push(X),H.push(re)}function Q(z){for(const[Y,K]of z.entries()){if(K.classList.contains("empty-cell"))continue;const X=z[Y-1];(!X||!X.classList.contains("selected-line"))&&K.classList.add("selected-line-top");const re=z[Y+1];(!re||!re.classList.contains("selected-line"))&&K.classList.add("selected-line-bottom")}}i(Q,"doBorder"),Q(m),Q(g),Q(x),Q(H);for(const[z,Y]of g.entries())H[z].classList.contains("selected-line")||Y.classList.add("selected-line-right");for(const[z,Y]of x.entries())g[z].classList.contains("selected-line")||Y.classList.add("selected-line-left")}i(y,"drawBorderForSplit");function I(){if(!a)return;for(const H of a.elements)H.classList.add("selected-line");const m=Array.from(a.rows()),g=m[0];for(const H of g.children)H.classList.add("selected-line-top");const x=m[m.length-1];for(const H of x.children)H.classList.add("selected-line-bottom")}i(I,"drawBorderForUnified");function U(){if(a){for(const X of a.elements)X.classList.remove("selected-line","selected-line-top","selected-line-bottom","selected-line-left","selected-line-right");a=null}const m=(0,j.s)(window.location.hash);if(!m)return;const g=m[1],x=m[2],H=m[3],Q=m[4]||x,z=m[5]||H;a=new E(g,x,+H,Q,+z);const K=Array.from(a.elements)[0];!K||(K.closest(".js-diff-table").classList.contains("file-diff-split")?y():I())}i(U,"showHighlight");function te(m,g){const x={starting_diff_position:g.start.side+g.start.lineNumber,ending_diff_position:g.end.side+g.end.lineNumber,line_count:g.lineCount};m.setAttribute("data-hydro-client-context",JSON.stringify(x)),(0,S.Fk)(m)}i(te,"sendHydroEvent"),(0,P.Z)(U),(0,l.N7)(".blob-expanded",U),(0,l.N7)(".js-diff-progressive-loader",function(m){m.addEventListener("load",U)}),(0,l.N7)(".js-diff-entry-loader",function(m){m.addEventListener("load",U)})},58561:(G,$,d)=>{var u=d(11427);(0,u.on)("click",".js-rich-diff.collapsed .js-expandable",function(T){if(!(T.target instanceof Element))return;T.preventDefault(),T.target.closest(".js-rich-diff").classList.remove("collapsed")}),(0,u.on)("click",".js-show-rich-diff",function(T){const E=T.currentTarget.closest(".js-warn-no-visible-changes");if(!E)return;E.classList.add("d-none");const j=E.parentElement.querySelector(".js-no-rich-changes");j&&j.classList.remove("d-none")})},36805:(G,$,d)=>{d.d($,{M:()=>E,T:()=>P});var u=d(46393),T=d(65889);function E(b,D=!1){return P(b)||p(b,D)||_(b)||k(b)}i(E,"hasInteractions");function P(b){for(const D of b.querySelectorAll("input, textarea"))if((D instanceof HTMLInputElement||D instanceof HTMLTextAreaElement)&&j(D))return!0;return!1}i(P,"hasDirtyFields");function j(b){if(b instanceof HTMLInputElement&&(b.type==="checkbox"||b.type==="radio")){if(b.checked!==b.defaultChecked)return!0}else if(b.value!==b.defaultValue)return!0;return!1}i(j,"formFieldValueChanged");let l;async function v(b,D){l=b;try{await D()}finally{l=null}}i(v,"withActiveElement");function S(b){return l instanceof Element?l:b&&b.ownerDocument&&b.ownerDocument.activeElement?b.ownerDocument.activeElement:null}i(S,"getActiveElement");let a;document.addEventListener("mouseup",function(b){a=b.target});function p(b,D){const q=S(b);return q===null||D&&q===b?!1:q===b&&(0,T.sw)(q)||b.contains(q)&&!L(q)?!0:a instanceof Element&&b.contains(a)&&!!a.closest("details[open] > summary")}i(p,"hasFocus");const h="a[href], button";function L(b){var D;if(b instanceof u.Z)return!0;const q=b instanceof HTMLAnchorElement||b instanceof HTMLButtonElement,B=(D=b.parentElement)==null?void 0:D.classList.contains("task-list-item");if(q&&B)return!0;if(!(a instanceof Element))return!1;const w=b.closest(h);if(!w)return!1;const R=a.closest(h);return w===R}i(L,"activeElementIsSafe");function _(b){return b.matches(":active:enabled")}i(_,"hasMousedown");function k(b){return!!(b.closest(".is-dirty")||b.querySelector(".is-dirty"))}i(k,"markedAsDirty")},4463:(G,$,d)=>{d.d($,{$S:()=>T,Fk:()=>E,sz:()=>P});var u=d(76343);function T(j,l,v){const S={hydroEventPayload:j,hydroEventHmac:l,visitorPayload:"",visitorHmac:"",hydroClientContext:v},a=document.querySelector("meta[name=visitor-payload]");a instanceof HTMLMetaElement&&(S.visitorPayload=a.content);const p=document.querySelector("meta[name=visitor-hmac]")||"";p instanceof HTMLMetaElement&&(S.visitorHmac=p.content),(0,u.b)(S,!0)}i(T,"sendData");function E(j){const l=j.getAttribute("data-hydro-view")||"",v=j.getAttribute("data-hydro-view-hmac")||"",S=j.getAttribute("data-hydro-client-context")||"";T(l,v,S)}i(E,"trackView");function P(j){const l=j.getAttribute("data-hydro-click-payload")||"",v=j.getAttribute("data-hydro-click-hmac")||"",S=j.getAttribute("data-hydro-client-context")||"";T(l,v,S)}i(P,"sendHydroEvent")},10555:(G,$,d)=>{d.d($,{zT:()=>E,kc:()=>P,lA:()=>j});var u=d(67647),T=d(1868);function E(l){const v=l.ownerDocument;setTimeout(()=>{v&&v.defaultView&&(l.scrollIntoView(),v.defaultView.scrollBy(0,-j(v)))},0)}i(E,"scrollIntoView");function P(l){const v=(0,u.Kt)(l);v&&E(v)}i(P,"scrollToFragmentTarget");function j(l){(0,T.H)();const v=l.querySelectorAll(".js-sticky-offset-scroll"),S=l.querySelectorAll(".js-position-sticky"),a=Math.max(0,...Array.from(v).map(L=>{const{top:_,height:k}=L.getBoundingClientRect();return _===0?k:0}))+Math.max(0,...Array.from(S).map(L=>{const{top:_,height:k}=L.getBoundingClientRect(),b=parseInt(getComputedStyle(L).top);if(!L.parentElement)return 0;const D=L.parentElement.getBoundingClientRect().top;return _===b&&D<0?k:0})),p=l.querySelectorAll(".js-position-sticky-stacked"),h=Array.from(p).reduce((L,_)=>{const{height:k,top:b}=_.getBoundingClientRect(),D=b<0,q=_.classList.contains("is-stuck");return L+(!D&&q?k:0)},0);return a+h}i(j,"computeFixedYOffset")},61257:(G,$,d)=>{d.d($,{WU:()=>l,x0:()=>v,Of:()=>S});var u=d(36805),T=d(30762),E=d(75914),P=d(84028);const j=new WeakMap,l={};async function v(h){if(j.get(h))return;const L=h.hasAttribute("data-retain-focus"),_=h.getAttribute("data-url");if(!_)throw new Error("could not get url");const k=new AbortController;j.set(h,k);try{const b=await fetch(_,{signal:k.signal,headers:{Accept:"text/html","X-Requested-With":"XMLHttpRequest"}});if(!b.ok)return;const D=await b.text();if((0,u.M)(h,L)){console.warn("Failed to update content with interactions",h);return}return l[_]=D,a(h,D,L)}catch{}finally{j.delete(h)}}i(v,"updateContent");async function S(h,L,_=!1){const k=j.get(h);k==null||k.abort();const b=h.closest(".js-updatable-content[data-url], .js-updatable-content [data-url]");return!_&&b&&b===h&&(l[b.getAttribute("data-url")||""]=L),a(h,L)}i(S,"replaceContent");function a(h,L,_=!1){return(0,P._8)(document,()=>{const k=(0,E.r)(document,L.trim()),b=_&&h.ownerDocument&&h===h.ownerDocument.activeElement?k.querySelector("*"):null,D=Array.from(h.querySelectorAll("details[open][id]")).map(q=>q.id);h.tagName==="DETAILS"&&h.id&&h.hasAttribute("open")&&D.push(h.id);for(const q of h.querySelectorAll(".js-updatable-content-preserve-scroll-position")){const B=q.getAttribute("data-updatable-content-scroll-position-id")||"";p.set(B,q.scrollTop)}for(const q of D){const B=k.querySelector(`#${q}`);B&&B.setAttribute("open","")}h.replaceWith(k),b instanceof HTMLElement&&b.focus()})}i(a,"replace");const p=new Map;(0,T.N7)(".js-updatable-content-preserve-scroll-position",{constructor:HTMLElement,add(h){const L=h.getAttribute("data-updatable-content-scroll-position-id");if(!L)return;const _=p.get(L);_!=null&&(h.scrollTop=_)}})},44088:(G,$,d)=>{d.d($,{Z:()=>T});function u(E){return E.offsetWidth<=0&&E.offsetHeight<=0}i(u,"hidden");function T(E){return!u(E)}i(T,"visible")},84028:(G,$,d)=>{d.d($,{_8:()=>u,uQ:()=>T});function u(j,l){return T(E(j),l)}i(u,"preserveAnchorNodePosition");function T(j,l){var v=j;if(!v)return Promise.resolve(l());var S=v.ownerDocument.documentElement;function a(L){for(var _=[];L;){var k=L.getBoundingClientRect(),b=k.top,D=k.left;_.push({element:L,top:b,left:D}),L=L.parentElement}return _}i(a,"computeAncestorBoundingRects");function p(L){for(var _=0;_<L.length;_++){var k=L[_];if(S.contains(k.element))return k}}i(p,"firstAttachedBoundingRect");var h=a(v);return Promise.resolve(l()).then(function(L){var _=p(h);if(_){v=_.element;var k=_.top,b=_.left,D=v.getBoundingClientRect(),q=D.top,B=D.left;P(v,B-b,q-k)}return L})}i(T,"preservePosition");function E(j){if(j.activeElement!==j.body)return j.activeElement;var l=j.querySelectorAll(":hover"),v=l.length;if(v)return l[v-1]}i(E,"findAnchorNode");function P(j,l,v){var S=j.ownerDocument,a=S.defaultView;function p(q){return q.offsetParent?{top:q.scrollTop,left:q.scrollLeft}:{top:a.pageYOffset,left:a.pageXOffset}}i(p,"scrollOffsets");function h(q,B,w){if(B===0&&w===0)return[0,0];var R=p(q),W=R.top+w,O=R.left+B;q===S||q===a||q===S.documentElement||q===S.body?S.defaultView.scrollTo(O,W):(q.scrollTop=W,q.scrollLeft=O);var J=p(q);return[J.left-R.left,J.top-R.top]}i(h,"scrollBy");function L(q){var B=q;if(!(!B.offsetParent||B===S.body)){for(;B!==S.body;){if(B.parentElement)B=B.parentElement;else return;var w=a.getComputedStyle(B),R=w.position,W=w.overflowY,O=w.overflowX;if(R==="fixed"||W==="auto"||O==="auto"||W==="scroll"||O==="scroll")break}return B}}i(L,"overflowParent");for(var _=L(j),k=0,b=0;_;){var D=h(_,l-k,v-b);if(k+=D[0],b+=D[1],k===l&&b===v)break;_=L(_)}}i(P,"cumulativeScrollBy")},61075:(G,$,d)=>{d.d($,{Z:()=>S});const u=new WeakMap,T=new IntersectionObserver(a=>{for(const p of a)if(p.isIntersecting){const{target:h}=p;if(T.unobserve(h),!(h instanceof S))return;h.loading==="lazy"&&P(h)}},{rootMargin:"0px 0px 256px 0px",threshold:.01});function E(){return new Promise(a=>setTimeout(a,0))}i(E,"task");async function P(a){return T.unobserve(a),j(a).then(function(p){const h=document.createElement("template");h.innerHTML=p;const L=document.importNode(h.content,!0);!a.dispatchEvent(new CustomEvent("include-fragment-replace",{cancelable:!0,detail:{fragment:L}}))||(a.replaceWith(L),a.dispatchEvent(new CustomEvent("include-fragment-replaced")))},function(){a.classList.add("is-error")})}i(P,"handleData");function j(a){const p=a.src;let h=u.get(a);return h&&h.src===p?h.data:(p?h=l(a):h=Promise.reject(new Error("missing src")),u.set(a,{src:p,data:h}),h)}i(j,"getData");function l(a){return E().then(()=>(a.dispatchEvent(new Event("loadstart")),a.fetch(a.request()))).then(p=>{if(p.status!==200)throw new Error(`Failed to load resource: the server responded with a status of ${p.status}`);const h=p.headers.get("Content-Type");if(!v(a.accept)&&(!h||!h.includes(a.accept?a.accept:"text/html")))throw new Error(`Failed to load resource: expected ${a.accept||"text/html"} but was ${h}`);return p.text()}).then(p=>(E().then(()=>{a.dispatchEvent(new Event("load")),a.dispatchEvent(new Event("loadend"))}),p),p=>{throw E().then(()=>{a.dispatchEvent(new Event("error")),a.dispatchEvent(new Event("loadend"))}),p})}i(l,"fetchDataWithEvents");function v(a){return a&&!!a.split(",").find(p=>p.match(/^\s*\*\/\*/))}i(v,"isWildcard");class S extends HTMLElement{static get observedAttributes(){return["src","loading"]}get src(){const p=this.getAttribute("src");if(p){const h=this.ownerDocument.createElement("a");return h.href=p,h.href}else return""}set src(p){this.setAttribute("src",p)}get loading(){return this.getAttribute("loading")==="lazy"?"lazy":"eager"}set loading(p){this.setAttribute("loading",p)}get accept(){return this.getAttribute("accept")||""}set accept(p){this.setAttribute("accept",p)}get data(){return j(this)}attributeChangedCallback(p,h){p==="src"?this.isConnected&&this.loading==="eager"&&P(this):p==="loading"&&this.isConnected&&h!=="eager"&&this.loading==="eager"&&P(this)}constructor(){super();this.attachShadow({mode:"open"}).innerHTML=`
      <style> 
        :host {
          display: block;
        }
      </style>
      <slot></slot>`}connectedCallback(){this.src&&this.loading==="eager"&&P(this),this.loading==="lazy"&&T.observe(this)}request(){const p=this.src;if(!p)throw new Error("missing src");return new Request(p,{method:"GET",credentials:"same-origin",headers:{Accept:this.accept||"text/html"}})}load(){return j(this)}fetch(p){return fetch(p)}}i(S,"IncludeFragmentElement"),window.customElements.get("include-fragment")||(window.IncludeFragmentElement=S,window.customElements.define("include-fragment",S))}},G=>{var $=i(u=>G(G.s=u),"__webpack_exec__");G.O(0,["vendors-node_modules_selector-observer_dist_index_esm_js","vendors-node_modules_delegated-events_dist_index_js-node_modules_github_details-dialog-elemen-63debe","vendors-node_modules_virtualized-list_es_index_js-node_modules_github_template-parts_lib_index_js","vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_github_remote-form_-4b83bb","github_behaviors_pjax_ts","github_fetch_ts-github_form_ts-github_input-demux_ts-github_onfocus_ts-github_ref-selector_ts-607464"],()=>$(21230));var d=G.O()}]);})();

//# sourceMappingURL=diffs-6eb9cd9902b11ca0abd21f52230e6d98511c969014e88540b627ca92ed1c32ce01c1d63e258c71b46c40f330bb06116a191d14eb364730dece53fad97de9ddba.js.map